.\" Copyright (c) 1989, 1991 The Regents of the University of California.
.\" All rights reserved.
.\"
.\" %sccs.include.redist.roff%
.\"
.\"     @(#)exports.5	5.3 (Berkeley) %G%
.\"
.Dd 
.Dt EXPORTS 5
.Os
.Sh NAME
.Nm exports
.Nd define remote mount points for
.Tn NFS
mount requests
.Sh SYNOPSIS
.Nm exports
.Sh DESCRIPTION
The
.Nm exports
file
specifies remote mount points for the
.Tn NFS
mount protocol per the
.Tn NFS
server specification; see
.%T "Network File System Protocol Specification \\*(tNRFC\\*(sP 1094" .
.Pp
Each line in the file
(other than comment lines that begin with a #)
specifies either a ``netgroup'' list or a remote mount point.
If the first field begins with a '/' then it is considered a mount entry.
Otherwise it is considered a ``netgroup'',
a list of hosts that are to be referred to by a group name.
In a ``netgroup'' list,
the first field is the name of the ``netgroup'' followed
by a list of hosts separated by whitespace.
.Pp
In a mount entry,
the first field is the mount point directory path optionally followed
by groups of export options and specific hosts or ``netgroups''
to which those options apply.
A filesystem may appear multiple times with
different sets of hosts each with different export options.
If a set of export options are specified at the end
of the line with no hosts following them,
then the mount point is exported to all
other hosts with those export options.
There may be at most one such listing per local filesystem.
.Pp
Export options are specified as follows:
.Pp
.Sm off
.Fl root No = Sy user
.Sm on
The credential of the specified user is used for remote access by root.
The credential includes all the groups to which the user is a member
on the local machine (see
.Xr id 1 ).
The user may be specified by name or number.
.Pp
.Sm off
.Fl root No = Sy user:group1:group2:...
.Sm on
The colon separated list is used to specify the precise credential
to be used for remote access by root.
The elements of the list may be either names or numbers.
Note that user: should be used to distinguish a credential containing
no groups from a complete credential for that user.
.Pp
.Sm off
.Fl allanon No = Sy user
.Sm on
or
.Sm off
.Fl allanon No = Sy user:group1:group2:...
.Sm on
specifies a mapping for all client uids (including root)
using the same semantics as
.Fl root .
.Pp
The option
.Fl r
is synonyms for
.Fl root
in an effort to be backward compatible with older export file formats.
.Pp
In the absence of
.Fl root
and
.Fl allanon
options, remote accesses by root will result in using a credential of -2:-2.
All other users will have their remote credentials applied.
If a
.Fl root
option is given,
remote access by root will have that credential applied instead of -2:-2.
If a
.Fl allanon
option is given,
all users (including root) will have that credential applied in
place of their own.
If an entry specifies a list of hosts, the
.Fl root
and
.Fl allanon
options apply only to those hosts.
If an entry without a list of hosts appears, the
.Fl root
and
.Fl allanon
options apply to all hosts that connect that are
not otherwise explicitly listed.
Note that each local filesystem may have only a single
definition for ``all unspecified hosts''.
.Pp
The
.Fl kerb
option specifies that the Kerberos authentication server should be
used to authenticate and uid map client credentials.
(Note that this is NOT Sun NFS compatible and
is supported for TCP transport only.)
.Pp
The
.Fl ro
option specifies that the filesystem should be exported Read-only
(default Read/Write).
The option
.Fl o
is synonyms for
.Fl ro
in an effort to be backward compatible with older export file formats.
.Pp
For example:
.Bd -literal -offset indent
UoG= snowhite grumpy
/usr -root=0:10 $UoG
/usr -root=daemon 131.104.48.16 -ro -allanon=daemon
/usr/local
/u -root=bin:
/u2 -ro -root=5:20
.Ed
.Pp
Given that
.Sy /usr ,
.Sy /u
and
.Sy /u2
are
local filesystem mount points, the above example specifies the following:
.Sy /usr
is exported to hosts
.Em snowhite
and
.Em grumpy
with users applying their remote credentials and
root mapped to uid 0 and group 10;
it is exported to
.Em 131.104.48.16
with users applying their remote credentials and
root mapped to the user and groups associated with ``daemon'';
it is exported to the rest of the world as read-only with
all users mapped to the user and groups associated with ``daemon''.
.Pp
.Sy /usr/local
is exported to the rest of the world as read-only with all users
mapped to the user and groups associated with ``daemon'', since
.Sy /usr/local
already has a definition for world access from the /usr entry
(which is the local mount point).
The entry
.Bd -literal -offset indent
/usr/local -allanon=daemon
.Ed
.sp
would be illegal because a local filesystem can only have a
single mapping for ``all unspecified hosts''.
.Pp
.Sy /u
is exported to all hosts with root mapped to the uid for ``bin''
and with no group access.
.Pp
.Sy /u2
is exported read-only to all hosts with root mapped to uid 5 and gid 20.
.Sh FILES
.Bl -tag -width /etc/exports -compact
.It Pa /etc/exports
The default remote mount-point file.
.El
.Sh SEE ALSO
.Xr mountd 8 ,
.Xr nfsd 8 ,
.Xr showmount 8
.Sh BUGS
The export options are tied to the local mount points in the kernel and
must be non-contradictory for any exported subdirectory of the local
server mount point.
It is recommended that all exported directories within the same server
filesystem be specified on adjacent lines going down the tree.
.Sh HISTORY
The
.Nm
file format is
.Ud .
