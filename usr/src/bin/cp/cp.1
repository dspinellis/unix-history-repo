.\" Copyright (c) 1989, 1990 The Regents of the University of California.
.\" All rights reserved.
.\"
.\" This code is derived from software contributed to Berkeley by
.\" the Institute of Electrical and Electronics Engineers, Inc.
.\"
.\" %sccs.include.redist.roff%
.\"
.\"	@(#)cp.1	6.20 (Berkeley) %G%
.\"
.Dd 
.Dt CP 1
.Os BSD 4
.Sh NAME
.Nm cp
.Nd copy files
.Sh SYNOPSIS
.Nm cp
.Op Fl HRfhip
.Ar source_file target_file
.Nm cp
.Op Fl HRfhip
.Ar source_file ... target_directory
.Sh DESCRIPTION
In the first synopsis form, the
.Nm cp
utility copies the contents of the
.Ar source_file
to the
.Ar target_file .
In the second synopsis form,
the contents of each named
.Ar source_file
is copied to the destination
.Ar target_directory .
The names of the files themselves are not changed.
If
.Nm cp
detects an attempt to copy a file to itself, the copy will fail.
.Pp
The following options are available:
.Bl -tag -width flag
.It Fl H
When encountering a symbolic link on the command line, follow it.  All other
symbolic links encountered in the traversal are not followed.
Provided for the
.Fl R
option which does not follow symbolic links by default.
.It Fl R
If
.Ar source_file
designates a directory,
.Nm cp
copies the directory and the entire subtree connected at that point.
This option also causes symbolic links to be copied, rather than
indirected through, and for
.Nm cp
to create special files rather than copying them as normal files.
Created directories have the same mode as the corresponding source
directory, unmodified by the process' umask.
.It Fl f
For each existing destination pathname, remove it and
create a new file, without prompting for confirmation
regardless of its permissions.
(The
.Fl i
option is ignored if the
.Fl f
option is specified.)
.It Fl h
When encountering a symbolic link anywhere in the traversal, follow it.
Provided for the
.Fl R
option which does not follow symbolic links by default.
.It Fl i
Causes
.Nm cp
to write a prompt to standard error before copying a file that would
overwrite an existing file.
If the response from the standard input begins with the character
.Sq Li y ,
the file is copied if permissions allow the copy.
.It Fl p
Causes
.Nm cp
to preserve in the copy as many of the modification time, access time,
file flags, file mode, user ID, and group ID as allowed by permissions.
.Pp
If the user ID and group ID cannot be preserved, no error message
is displayed and the exit value is not altered.
.Pp
If the source file has its set user ID bit on and the user ID cannot
be preserved, the set user ID bit is not preserved
in the copy's permissions.
If the source file has its set group ID bit on and the group ID cannot
be preserved, the set group ID bit is not preserved
in the copy's permissions.
If the source file has both the set user ID and set group ID bits
on and either the user ID or group ID cannot be preserved, neither
the set user ID or set group ID bits are preserved in the copy's
permissions.
.El
.Pp
For each destination file that already exists, its contents are
overwritten if permissions allow, but its mode, user ID, and group
ID are unchanged.
.Pp
In the second synopsis form, 
.Ar target_directory 
must exist unless there is only one named
.Ar source_file
which is a directory and the 
.Fl R 
flag is specified.
.Pp
If the destination file does not exist, the mode of the source file is
used as modified by the file mode creation mask
.Pf ( Ic umask ,
see
.Xr csh 1 ) .
If the source file has its set user ID bit on, that bit is removed
unless both the source file and the destination file are owned by the
same user.
If the source file has its set group ID bit on, that bit is removed
unless both the source file and the destination file are in the same
group and the user is a member of that group.
If both the set user ID and set group ID bits are set, all of the above
conditions must be fulfilled or both bits are removed.
.Pp
Appropriate permissions are required for file creation or overwriting.
.Pp
Symbolic links are always followed unless the 
.Fl R 
flag is set in which case symbolic links are not followed by default.  
However, the
.Fl H
or 
.Fl h
flags (in conjuction with the
.Fl R
flag) cause symbolic link following as detailed above.
.Pp
.Nm Cp
exits 0 on success, >0 if an error occurred.
.Sh SEE ALSO
.Xr mv 1 ,
.Xr rcp 1 ,
.Xr symlink 1 ,
.Xr umask 2 , 
.Xr fts 3
.Sh HISTORY
The
.Nm cp
command is expected to be
.St -p1003.2
compatible.
