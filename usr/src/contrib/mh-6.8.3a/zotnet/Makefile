##############################################################################
#    Instructions to Make, for compilation of ZOT UIP/utility processes
#
#	This file is automatically generated.  Do not edit!
# @(#)$Id: zotnetM,v 2.7 1992/10/29 16:25:20 jromine Exp $
##############################################################################

# The following entries were inserted during MH configuration
OPTIONS	=	-DBIND -DBSD42 -DBSD43 -DDBMPWD -DMORE='"/usr/bin/more"' -DSYS5DIR -DNTOHLSWAP -DOVERHEAD -DVSPRINTF -DWHATNOW -DZONEINFO -DMHE -DMHRC -DMIME -DPOSIX -DBSD44 -DWAITINT -DUNISTD -DGCOS_HACK -DNORUSERPASS -DPOP2 -DRPOP -DPOPSERVICE='"pop3"' -DSENDMTS -DSMTP -DPOP -DBPOP -DNNTP -DSPRINTFTYPE=int -DTYPESIG=void -O

CC	=	cc
CFLAGS	=	$(OPTIONS) -I.
LFLAGS	=	-bhu $(OPTIONS) -I.

LIB	=	libzot.a
LLIB	=	llib-lzotnet

OFILES	=	mts/mts.o mts/lock.o mts/client.o mf/mf.o \
		bboards/getbbent.o \
		tws/dtime.o tws/dtimep.o tws/lexstring.o

MAKE	=	make DESTDIR=$(DESTDIR) $(MFLAGS)
SHELL	=	/bin/sh

DIRS	=	mts bboards tws mf


##############################################################################
#	Generation Rules
##############################################################################

.c.o:;		$(CC) $(CFLAGS) -c $*.c
		-ld -x -r $@
		mv a.out $@



.c:;		echo $@

##############################################################################
#	Generate ZOTnet subroutine library
##############################################################################

all:		allaux $(LIB)

$(LIB):		$(OFILES)
		-mv $@ z$@
		ar r $@ $(OFILES); ranlib $@
		-@ls -l $@
		-@echo "ZOTnet library built normally"

allaux:;	for d in $(DIRS); do (cd $$d; $(MAKE) all); done

depend:;	for d in $(DIRS); do (cd $$d; $(MAKE) depend); done

lint:;		for d in $(DIRS); do (cd $$d; $(MAKE) lint); done


##############################################################################
#	Installation
##############################################################################

install:	inst-all clean

inst-all:;	for d in $(DIRS); do (cd $$d; $(MAKE) inst-all); done

tar:;		@for d in $(DIRS); \
		    do (cd $$d; $(MAKE) TFLAGS="$(TFLAGS)" tar); done

uninstall:;	for d in $(DIRS); do (cd $$d; $(MAKE) uninstall); done


##############################################################################
#	Miscellaneous tasks
##############################################################################

unconfig:;	-rm -f $(LIB) z$(LIB) _* :* *.o core
		for d in $(DIRS); do (cd $$d; $(MAKE) unconfig); done
		-rm -f Makefile

distribution:;	-rm -f $(LIB) z$(LIB) _* :*
		for d in $(DIRS); do (cd $$d; $(MAKE) distribution); done

clean:;		-rm -f $(LIB) z$(LIB) _* :* *.o core
		for d in $(DIRS); do (cd $$d; $(MAKE) clean); done

unclean:;	-rm -f z$(LIB) _* :* core
		for d in $(DIRS); do (cd $$d; $(MAKE) unclean); done
