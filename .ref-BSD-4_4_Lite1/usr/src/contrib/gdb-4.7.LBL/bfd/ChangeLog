Thu Oct 22 22:40:20 1992  Brendan Kehoe  (brendan@lisa.cygnus.com)

	* solaris2.h: Get the definition of alloca from alloca.h if we
	aren't using gcc.

Thu Oct 22 03:07:28 1992  John Gilmore  (gnu@cygnus.com)

	* configure.in (i960-*-{aout,bout}):  Support these.

Wed Oct 21 03:46:34 1992  John Gilmore  (gnu@cygnus.com)

	* config/a29k-aout.mt (DEFAULT_TARGET):  Set to one that exists.

Thu Oct 15 15:05:39 1992  Per Bothner  (bothner@cygnus.com)

	* apollo68.h, apollov68.h, hp300.h, i386v.h, irix3.h: Remove
	no-longer-used definitions of L_SET and L_INCR.
	* i386linux.h:  Tweaks to smooth Linux build.

Thu Oct 15 01:32:22 1992  John Gilmore  (gnu@cygnus.com)

	* seclet.h:  Add enum tag to bfd_seclet_enum_type.

	* bfd-in.h (file_ptr):  Update comments, make FIXME re off_t.

	* aout-adobe.c, aoutf1.h, archive.c, bout.c, coff-rs6000.c,
	coffcode.h, elf.c, ieee.c, libaout.h, libbfd.c, oasys.c,
	sco-core.c:  Lint:  Second argument of bfd_seek is always file_ptr.
	Third argument is SEEK_SET or SEEK_CUR.  Result is always 0 or -1.

	* aout-adobe.c, aoutf1.h, aoutx.h, bout.c coff-m68k.c, coff-z8k.c,
	coffcode.h, elf.c, libaout.h, libbfd-in.h, srec.c:  Lint.

Fri Oct  9 03:46:37 1992  John Gilmore  (gnu@cygnus.com)

	* configure.host:  New file, contains mapping of host configs
	to host support file names for bfd, binutils, opcodes.
	* configure.in:  Use it.
	* i386aout.c:  Cleanup, dump TARGET_IS_LITTLE_ENDIAN_P.
	* i386bsd.c:  Cleanup, reformat.
	* config/i386-bsd.mt:  Comment changes.
	* config/i386bsd.mh:  New file for core file support.
	* hosts/i386bsd.h:  Merge changes from Peter Schauer.
	* bout.c (ALIGN):  Rename to ALIGNER, since system header files
	on BSD 4.4 define ALIGN (sigh!).

Thu Oct  8 22:18:10 1992  Mark Eichin  (eichin at tweedledumber.cygnus.com)

	* libaout.h (aout_backend_data): added exec_header_not_counted
	field. For ZMAGIC files only, when text_includes_header is set, by
	default the length of the exec header is counted in the text
	section size. For go32, exec header is mapped in but does *not*
	contribute to the size of section.
	* aoutx.h (aout_adjust_sizes_and_vmas): if exec_header_not_counted
	is not set, but ztih is, add the size of the exec header to the
	recorded size of the text section.
	* aoutf1.h (sunos4_aout_backend): clear exec_header_not_counted.
	* i386aout.c (i386aout_backend_data): set exec_header_not_counted.
	Also set text_includes_header.
	* aout-target.h (*_backend_data): cleare exec_header_not_counted
	by default in MY(backend_data).

Thu Oct  8 18:12:49 1992  Ken Raeburn  (raeburn@cygnus.com)

	* aout-target.h (callback): Don't define this function if it won't be
	used.

	* aoutx.h (some_aout_object_p): Restore old aout_data value if this
	type doesn't match.  Don't lose if file sections have already been
	created.
	(set_arch_mach): Set reloc_entry_size.
	(slurp_symbol_table): Use bfd_h_get_{16,8} for reaeding symbol data.

	* hosts/i386bsd.h: New file.
	* configure.in: Recognize i[34]86-*-bsd host.

	* aout-target.h (callback, write_object_contents): Delete unused
	variables.

	* aoutx.h (reloc_type_lookup): New function.
	* aout-target.h (MY_reloc_howto_type_lookup): Use it as default.
	* aoutf1.h (sunos4_reloc_type_lookup): Deleted.
	(MY_reloc_howto_type_lookup): Don't define it.

	* aoutx.h (adjust_sizes_and_vmas): Don't bother with padding for
	OMAGIC files.
	(slurp_symbol_table): Use header byte order, not target byte
	order, for reading symbol data.

Thu Oct  8 17:33:39 1992  John Gilmore  (gnu@cygnus.com)

	* configure.in:  Undo some brain damage in the host section.
	* configure.in:  Reformat the target section, test many configs.
	* Makefile.in (make):  Remove obsolete `make make'.
	* aoutx.h (some_aout_object_p):  Make defines line up.

Thu Oct  8 08:52:48 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	Now a bfd knows whether underscores are normally prepended
	to symbols in its file format.

	* aout-adobe.c, aout-target.h, bout.c, coff-a29k.c, coff-h8300.c,
	coff-z8k.c: targets set so they have leading underscore
	* coff-i386.c, coff-i960.c, coff-m68k.c, coff-mips.c, coff-m88k.c,
	coff-rs6000.c, coff-we32k.c, elf.c, ieee.c, srec.c: targets set 
	without leading underscore flag
	* targets.c: add symbol leading char to xvec description
	* bfd-in.h (bfd_get_symbol_leading_char): new macro.

Mon Oct  5 14:32:55 1992  Per Bothner  (bothner@cygnus.com)

	* archive.c:  Make errno global.
	* archive.c (_bfd_write_archive_contents):  If read fails (and
	errno!=0) set bfd_error to malformed_archive (since this probably
	indicates a truncated archive), rather than system_call_error.

Mon Oct  5 03:33:39 1992  Mark Eichin  (eichin at tweedledumber.cygnus.com)

	* Makefile.in: added rules for i386bsd.c
	* i386bsd.c: new file, supporting 386bsd.
	* configure.in: recognize i386-*-bsd target.
	* config/i386-bsd.mt: new file - 386bsd target configuration.

Thu Oct  1 17:51:07 1992  david d `zoo' zuhn  (zoo at cirdan.cygnus.com)

	* configure.in: re-arrange host section to use *-*-* notation,
	clean up some of the target section as well

	* seclet.c: cast result of bfd_get_relocated_section_contents to
	avoid compiler warnings

Tue Sep 29 13:24:09 1992  Ken Raeburn  (raeburn@cygnus.com)

	* coffcode.h (coff_section_symbol): Create section if it doesn't
	already exist.

	* bout.c: Removed some unused variables.

Tue Sep 29 08:30:21 1992  Ian Lance Taylor  (ian@cygnus.com)

	* Portability fixes from p3:
	coffcode.h (coff_write_relocs): removed sanity check until it
	works on all targets (per advice from sac).
	config/hp9000.mh: new file to define USG.
	hppa.c: #undef hppa before the JUMP_TABLE.
	hosts/hppahpux.h: #define NATIVE_HPPAHPUX_COMPILER if not
	__STDC__.
	targets.c (bfd_target_list): if NATIVE_HPPAHPUX_COMPILER, make
	local variable target volatile to avoid mysterious bug in
	HP9000/700 cc.

Sat Sep 26 03:58:49 1992  John Gilmore  (gnu@cygnus.com)

	* config/hppabsd.mh, config.hppahpux.mh:  Remove various bogosity.
	* hosts/hppahpux.h:  Remove bcopy and index circumventions.

Fri Sep 25 22:36:52 1992  John Gilmore  (gnu@cygnus.com)

	* coff-z8k.c (func_da, func_jr):  Lint.
	* coffcode.h:  Use memset rather than bzero.
	* elf.c:  Use memcpy rather than bcopy.
	* tekhex.c:  Use memset rather than bzero.

Fri Sep 25 19:14:48 1992  John Gilmore  (gnu@cygnus.com)

	Add Adobe a.out support.

	* aout-adobe.c:  New file.  So far, only reads a.out.adobe.  FIXME.
	* config/adobe.mt:  Add.
	* configure.in (*-adobe-* target):  Add.
	* targets.c (a_out_adobe_vec):  Add.
	* Makefile.in:  add aout-adobe.c.

	* configure.in:  Put two dashes in all entries to be matched.
	Add comments to remind people to do this.
	Reorder all entries that match manufacturer names, to occur
	last, so they will only be matched if no more specific match
	occurs.  Remove manufacturers `aout', `bout', `coff', and `elf'.

Fri Sep 25 15:03:22 1992  Brendan Kehoe  (brendan@rtl.cygnus.com)

	* elf.c (section_from_elf_index): Return bfd_abs_section, not 0,
	since we should never have a NULL section.
	(elf_slurp_symbol_table): If st_shndx doesn't match any of our
	tests, set the section to bfd_abs_section.

Fri Sep 25 11:11:57 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* coff-z8k.c: getting closer
	* coffcode.h (coff_get_relocated_section_contents): allow
	EXTRA_CASES hooks for different arches to provide different reloc
	types.
	* seclet.h: #ifndef around it to allow multiple inclusion
	* srec.c: minor doc fix

Mon Sep 21 14:33:58 1992  Ian Lance Taylor  (ian@cygnus.com)

	* hosts/hp9000.h, hosts/irix3.h: changes from WRS.

Sun Sep 20 08:48:25 1992  Fred Fish  (fnf@cygnus.com)

	* configure.in:  Use i386-elf for all i386/i486 sysv4 hosts, not
	just ncr.

Thu Sep 17 06:40:46 1992  Ken Raeburn  (raeburn@cambridge.cygnus.com)

	* bout.c (b_out_slurp_reloc_table): Clear howto field before
	filling in reloc, in case immediately following code doesn't set
	it.

Fri Sep 11 15:37:06 1992  Ian Lance Taylor  (ian@cygnus.com)

	* coffcode.h (coff_renumber_symbols): set the last renumbered
	symbol pointer to NULL, as expected by coff_write_linenumbers.
	(coff_write_relocs): apparently a non-zero addend is OK for reloc
	type R_IHCONST used on the 29k.

Thu Sep 10 13:28:24 1992  John Gilmore  (gnu@cygnus.com)

	* opncls.c (bfd_fdopenr):  Determine whether to fdopen for
	update, based on how the underlying file was opened.  Obsoletes
	FASCIST_FDOPEN.
	* hosts/rs6000.h, hosts/tahoe.h, hosts/vaxbsd.h:  Remove
	all FASCIST_FDOPEN config defines.

Tue Sep  8 21:37:58 1992  Ken Raeburn  (raeburn@cambridge.cygnus.com)

	* sparc-opc.c: Moved to opcodes library, now that we have one.
	* Makefile: Don't compile it.

Tue Sep  8 10:10:34 1992  Ian Lance Taylor  (ian@cygnus.com)

	* aoutx.h: adjust_sizes_and_vmas did not return anything.

Thu Sep  3 19:29:04 1992  Per Bothner  (bothner@rtl.cygnus.com)

	* section.c (bfd_set_section_flags):  Remove a sanity check.
	It is unfortunately broken, and prevents strip from working.

Thu Sep  3 16:14:40 1992  Jim Wilson  (wilson@sphagnum.cygnus.com)

	* sparc-opc.c (condr): Remove extraneous, but harmless, backlash
	created by last change.

Thu Sep  3 13:52:38 1992  Per Bothner  (bothner@rtl.cygnus.com)

	* reloc.c (reloc_howto_struct):  Make size field be unsigned.
	* bfd-in.h:  Bump to version 2.0.

Thu Sep  3 09:05:37 1992  Stu Grossman  (grossman at cygnus.com)

	* bout.c, cpu-z8k.c:  Use enums when initializing structs to keep
	braindamaged HP/Apollo compiler happy.

Wed Sep  2 02:53:29 1992  John Gilmore  (gnu@cygnus.com)

	* format.c:  Fix description of search for matching target.
	* aoutx.h (some_aout_object_p):  Set SEC_CODE and SEC_DATA.
	* targets.c:  Update description of search for matching target.
	* Makefile.in (do_clean, clean):  Fix infant mortality typo.
	(docdir):  Set to ./doc, not ${srcdir}/doc, which has no makefile.
	(z8k and we32k files):  `*.o: *.c': avoid Sun Make bug.

Wed Sep  2 00:26:32 1992  Per Bothner  (bothner@rtl.cygnus.com)

	* Makefile.in:  Added mostlyclean/clean/distclean rules.

Tue Sep  1 13:38:40 1992  Per Bothner  (bothner@cygnus.com)

	* targets.c (target_vector):  Take out oasys (unless that is
	the default):  Because there is no magic number in archives,
	there can be annoying target mis-matches.

Mon Aug 31 10:11:37 1992  Jim Wilson  (wilson@sphagnum.cygnus.com)

	* sparc-opc.c: Rigorously updated to match architecture manual.

Mon Aug 31 08:07:58 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* aoutx.h (aout<n>swap_ext_reloc_out), bout.c
	(b_out_squirt_out_relocs): fix bug 1506 where abs symbols attached
	to the built-in abs_section were not written out correctly.

Fri Aug 28 16:29:15 1992  Ian Lance Taylor  (ian@cygnus.com)

	* archive.c (bfd_slurp_bsd_armap): if the symdef_count is too
	large, assume we're using a swapped byte order and fail with
	wrong_format rather than dumping core.

Fri Aug 28 15:38:03 1992  Ken Raeburn  (raeburn@cygnus.com)

	* Renamed opc-sparc.c to sparc-opc.c for systems with short
	filename constraints.
	* Makefile.in: Updated to reflect change.

Thu Aug 27 13:05:28 1992  Brendan Kehoe  (brendan@cygnus.com)

	Add preliminary support for the we32k:

	* Makefile.in, archures.c, coffocode.h, configure.in, targets.c:
	Minor edits.
	* coff-we32k.c, cpu-we32k.c, config/we32k.mt, hosts/we32k.h: New files.

Wed Aug 26 14:20:16 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* bout.c: added support for relaxable alignment relocs.

	* seclet.c (rel, seclet_dump_seclet, seclet_dump): get the app to
	pass down pointer to play area rather than use alloca

	* cpu-z8k.c (compatible): made static to reduce name space
	polution.

Tue Aug 25 08:39:10 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

        Add basic support for the z8k:

	* Makefile.in, archures.c, coffcode.h, configure.in, reloc.c,
	section.c, targets.c, 

	* syms.c: move mis-inserted patch.

Fri Aug 14 15:39:29 PDT 1992  Howard Chu  (hyc@hanauma.jpl.nasa.gov)

	Documentation fixes:
	* ctors.c, format.c, section.c, reloc.c: append " -" to item tags.
	* reloc.c, section.c, syms.c, targets.c: add DOCDD before @node
		comments.
	* reloc.c: break out addend item from surrounding text.

	* doc.str (DOCDD): Defined. Adds text to output.
	(bodytext): Put bulletize before kill_bogus_lines.
	* chew.c (bulletize): End itemization after a blank line, to
	prevent following text from being swallowed up in an item.

Mon Aug 24 20:50:22 1992  Stu Grossman  (grossman at cygnus.com)

	* configure.in:  Add sparclite as a target.

Mon Aug 24 12:06:31 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* ieee.c (ieee_get_symtab): always null terminate the symbol list,
	lint.

	* coffcode.h (coff_add_missing_symbols): if symbols don't come
	from a coff file (csym is null), dont deref them

	* ieee.c (parse_expression): get the answer right when adding an
	abs+(sec+off), (ieee_generic_stat_arch_elt): call ieee_object_p
	on elts so that filename is filled in.

Thu Aug 20 19:05:48 1992  Ken Raeburn  (raeburn@cygnus.com)

	* bout.c (howto_align_table): New set of relocs, with enough
	data for "objdump -r" to work.
	(b_out_reloc_type_lookup): Recognize alignment relocs.

Tue Aug 18 12:57:45 1992  Ian Lance Taylor  (ian@cygnus.com)

 	* Makefile.in: added FLAGS_TO_PASS, and used it for all recursive
	invocations of make.  Also, always create installation
	directories.

	* config/apollov68.mh: removed -g from CC definition.

Mon Aug 17 13:40:08 1992  Ken Raeburn  (raeburn@cygnus.com)

	* config/decstation.mh (HDEFINES): Specify "-G 4" to avoid
	overflowing gp-offset range.

Mon Aug 17 11:44:28 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* srec.c (srec_set_section_contents): don't write out sections
	without the LOAD and ALLOC attributes

Mon Aug 17 11:55:07 1992  Ken Raeburn  (raeburn@cambridge.cygnus.com)

	* archures.c, cpu-m68k.c, cpu-sparc.c: Undo 16 June changes.
	* libaout.h (struct aout_backend_data): New callback "set_sizes".
	* aout-target.h (callback): Don't set page/seg sizes.
	(mkobject): Ditto.
	(set_sizes): New routine.
	(backend_data): Point to it.
	* aoutf1.h (sunos4_set_sizes): Heed architecture when setting sizes.
	(sunos4_aout_backend): Point to it.
	* aoutx.h (set_arch_mach): Call set_sizes callback.

Fri Aug 14 19:22:18 1992  Per Bothner  (bothner@cygnus.com)

	* aout-target.h:  Make _bfd_slurp_extended_name_table be
	the default.  Given that we *write* the suckers (for long
	archive member names), we really ought to be able to read them!
	* trad-core.c:  Don't include <machine/reg.h>.  It doesn't
	seem to be needed, and many machines don't have it.

Thu Aug 13 09:53:39 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* coff-m68k.c (vector): read and write archives in coff format.

Tue Aug 11 12:19:42 1992  Ken Raeburn  (raeburn@cygnus.com)

	* opc-sparc.c: New file.

Sat Aug  8 23:15:35 1992  Fred Fish  (fnf@cygnus.com)

	* bout.c (bfd_reloc_status_type, callj_callback):  Cast void*
	pointers to bfd_byte* before performing arithmetic on them.  Such
	use with bare void* pointers is a gcc extension.
	* cache.c (bfd_cache_delete):  Forward decl with prototype form.
	* archive (normalize):  Add to CONST to match actual usages with
	CONST.

Mon Aug  3 00:35:29 1992  Fred Fish  (fnf@cygnus.com)

	* configure.in:  Recognize i486 host cpu, and use i386-elf
	for i486-ncr-sysv4.

Sat Aug  1 13:49:59 1992  Fred Fish  (fnf@cygnus.com)

	* config/stratus.mt (CC):  Remove definition.
	* elf.c (bfd_section_from_shdr):  Test for the possibility that
	section_from_elf_index returns NULL and don't dereference it.

Mon Jul 20 02:46:09 1992  D. V. Henkel-Wallace  (gumby@cygnus.com)

	* add hppa_data to bfd tdata (indirectly via sef).

	* config/hppahpux.mh: hpux is -DUSG (patch by sef)

Sat Jul 18 15:50:11 1992  david d `zoo' zuhn  (zoo at cirdan.cygnus.com)

	* configure.in: error messages to stderr, not stdout

Fri Jul 17 18:32:46 1992  K. Richard Pixley  (rich@rtl.cygnus.com)

	* bfd.c, cache.c, coff-a29k.c, coff-i386.c, coff-i960.c,
	  coff-m68k.c, coff-m88k.c, demo64.c, libaout.h, libbfd.c,
	  oasys.c, opncls.c, sunos.c, targets.c: removed rcsid's.

Fri Jul 17 17:06:56 1992  david d `zoo' zuhn  (zoo at cirdan.cygnus.com)

	* configure.in: recognize hppa* instead of hppa

Thu Jul 16 16:39:25 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* coff-m68k.c: added R_RELLONG_NEG reloc type, and changed
	RTYPE2HOWTO to cope with same.
	* reloc.c (bfd_perform_relocation): added support for size of -2
	(subtract a word reloc type). Updated doc.

Thu Jul 16 16:28:09 1992  K. Richard Pixley  (rich@rtl.cygnus.com)

	* Makefile.in: merged changes from progressive, removed rcsid.

	* archures.c, archive.c, Makefile.dos: removed rcsid.

Thu Jul 16 08:08:25 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* bfd-in.h : add BFD_IS_RELAXABLE flag
	* bout.c (bout_swap_exec_header_[in_out]): new field in exec
	header e_relaxable, major hackery in callbacks
	* libaout.h : add space for a_relaxable.
	* seclet.c (rel): don't relax empty sections
	

Wed Jul 15 07:57:46 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* section.c (STD_SECTION): add some casts to the initializers for
	dumb compilers

Tue Jul 14 14:06:28 1992  Stu Grossman  (grossman at cygnus.com)

	* rs6000-core.c (rs6000coff_core_p):  Greatly simplify expression,
	and add appropriate casts to keep (picayune) aix-cc happy.

Mon Jul 13 05:06:51 1992  John Gilmore  (gnu at cygnus.com)

	* elf.c (elf_slurp_symbol_table):  Now 2nd arg is where to write
	symbol pointers.  Punt expensive & useless bfd_realloc.  Use
	malloc for raw symbols, and free it before returning.
	(bfd_section_from_shdr):  Do not slurp symbol table until politely
	asked. 	Do not even slurp string tables.
	(elf_get_symtab_upper_bound):  Count 'em without reading them.	
	(elf_get_symtab):  This is how to politely ask.  Schlurp!
	This should probably just *become* elf_slurp_symbol_table, FIXME.

Wed Jul  8 16:24:33 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* archive.c (bsd_write_armap): write the timestamp of the
	archive header to be just a little bit later than the timestamp of
	the file, otherwise the linker will complain that the index is
	out of date.

Tue Jul  7 00:23:23 1992  Fred Fish  (fnf@cygnus.com)

	* configure.in: Add m68k-ericsson-*.

Sat Jul  4 03:29:41 1992  John Gilmore  (gnu at cygnus.com)

	* syms.h:  Define BSF_FILE, update BSF_SECTION_SYM desc.
	* elf.c:  Remove unconditional debug printf's.
	(elf_write_object_contents, elf_slurp_symbol_table):  Handle
	BSF_SECTION_SYM <=> STT_SECTION, BSF_FILE <=> STT_FILE.
	(elf_slurp_symbol_table):  Hand out symbols in forward, not
	reverse order.  Simplify duplicate code.

Fri Jul  3 20:23:34 1992  Fred Fish  (fnf@cygnus.com)

	* elf.c:  Remove "(void)" casts from function calls where the
	return value is ignored, in accordance with GNU coding standards.

Tue Jun 30 16:49:12 1992  Fred Fish  (fnf@cygnus.com)

	* hppa.c:  Apply John's standard fix to avoid "empty translation
	unit" warnings from some ANSI-C compilers.

Thu Jun 25 04:39:25 1992  John Gilmore  (gnu at cygnus.com)

	* hosts/solaris2.h:  Configure same as sysv4.

Tue Jun 23 21:54:44 1992  Fred Fish  (fnf@cygnus.com)

	* libbfd.h, libbfd-in.h (bfd_seek):  Make prototype match definition.
	* reloc.c (bfd_default_reloc_type_lookup):  Make cast on return
	type match actual return type.
	* elf_print_symbol (section_name):  Make CONST.

Mon Jun 22 17:35:24 1992  Per Bothner  (bothner@cygnus.com)

	* i386linux.c, hosts/i386linux.h, config/i386-linux.mt:
	New files, for Linux (a free Unix clone for 386 machines).
	* Makefile.in, configure.in, targets.c:  Update accordingly.

Fri Jun 19 20:23:21 1992  Steve Chamberlain  (sac@thepub.cygnus.com)
	Lints for bfd_reloc_code_type->bfd_reloc_code_real_type, and
	correct calling of howto special functions and fixes from Raeburn
	for gas<>bfdness
	* archures.c: nuke bfd_reloc_code_type
	* bout.c, cpu-h8300.c, coff-i960.c, coff-m88k.c: special function lint
	* coffcode.h (styp_to_sec_flags): STYP_INFO is marked as
	SEC_NEVER_LOAD, various other bfdgas newness
	* reloc.c->libbfd.h: change protype of bfd_default_reloc_type_lookup
	* targets.c: change jump table vector to above


Fri Jun 19 19:00:45 1992  John Gilmore  (gnu at cygnus.com)

	* elf.c (bfd_elf_find_section):  Mark as INTERNAL_FUNCTION so
	its prototype will be included in libbfd.h.  Change result type
	to struct * (rather than equivalent typedef) so it can be used in
	the prototype, where they typedef won't be known.
	* libbfd.h:  Updated version.

Fri Jun 19 15:21:56 1992  Stu Grossman  (grossman at cygnus.com)

	* Makefile.in, archures.c, configure.in, cpu-hppa.c, hppa.c, libhppa.h,
	targets.c:  HPPA merge.

Fri Jun 19 12:21:38 1992  John Gilmore  (gnu at cygnus.com)

	* configure.in:  Separate Solaris2 from SYSV4 on SPARC.
	* config/solaris2.mh:  Kludge around Sun compiler bug.

Wed Jun 17 14:02:46 1992  Stu Grossman  (grossman at cygnus.com)

	* libaout.h (aout_backend_data):  Change defs of two bitfields to
	be unsigned chars instead to get around rs6000 compiler problem.

Wed Jun 17 13:55:31 1992  Fred Fish  (fnf@cygnus.com)

	* elf.c (bfd_section_from_shdr, elf_slurp_symbol_table):
	Correct misconception that there can be only one symbol table.
	Only call elf_slurp_symbol_table on the full symbol table, not
	the dynamic one which is only a subset of the full one.

Wed Jun 17 15:54:57 1992  Ken Raeburn  (Raeburn@Cygnus.COM)

	* coffcode.h (coff_compute_section_file_positions): For I960,
	don't align sections in file.

Tue Jun 16 06:28:21 1992  Ken Raeburn  (Raeburn@Cygnus.COM)

	* targets.c (struct bfd_target): Added field for target-specific
	(but not file-specific) data, for distinguishing minor
	characteristics between (e.g.) a.out formats.

	* section.c (struct sec): New field user_set_vma indicates vma
	field should be heeded, not assumed to be unset.
	(STD_SECTION): Initialize that field of standard sections to zero.
	* bfd-in.h (bfd_set_section_vma): Set user_set_vma to true.

	* coffcode.h (coff_write_relocs): Write out swapped reloc, not
	pre-swapped version.

	* archures.c (struct bfd_arch_info): Fixed order of comment and
	field decl.  New fields indicate size of page and segment for
	architecture.
	* cpu-m68k.c (N): Fill in values.
	* cpu-sparc.c (arch_info_struct): Ditto.

	* libaout.h (struct aout_backend_data): Various bits of data (not
	all used currently) with characteristics of a.out implementation.
	Important field for now is text_includes_header, indicating that
	the text section starts immediately after the file header, which
	gets mapped in with it.
	(struct aout_data): New fields indicate whether vma has been
	adjusted yet (not yet used), and what magic number will be used in
	the output file (should go away in favor of vma_adjusted).
	(WRITE_HEADERS): Code for dealing with section sizes and related
	header fields replaced with call to adjust_sizes_and_vmas.
	* aoutx.h (some_aout_object_p): Fill in magic number field.
	Set WP_TEXT flag for ZMAGIC as well as NMAGIC files.
	(set_arch_mach): Set page size and segment size once CPU
	type is known.
	(adjust_sizes_and_vmas): New function; has much code moved
	from set_section_contents and WRITE_HEADERS.  Sets or adjusts vma
	and size parameters, as well as many header fields, after deciding
	on magic number for output file.  Checks to ensure that this
	adjustment has only been done once.
	(set_section_contents): Call adjust_sizes_and_vmas instead of
	doing much of the work here.

	* aout-target.h (MY_make_debug_symbol, MY_backend_data): Provide
	default (null) values of these fields.
	* aoutf1.h (sunos4_write_object_contents): Don't override a_text
	value in exec header.
	(sunos4_aout_backend, MY_backend_data): Define backend data
	indicating file header is included in text section.

	* aoutf1.h (MY_reloc_howto_type_lookup): Fix typo.

	* hosts/sparc.h (abort, exit): Hide these names if compiling with
	gcc version 2, to avoid warnings.

Mon Jun 15 12:26:56 1992  Fred Fish  (fnf@cygnus.com)

	* config/ncr3000.mh (INSTALL, RANLIB):  Don't use /usr/ucb/install,
	it's broken on ncr 3000's.  Use simple "true" for RANLIB.

Sat Jun 13 09:16:43 1992  Michael Tiemann  (tiemann@rtl.cygnus.com)

	* configure.in (m680[01234]0-wrs-*): Fix typo in match pattern.

Fri Jun 12 19:48:34 1992  John Gilmore  (gnu at cygnus.com)

	* section.c (STD_SECTION):  Remove extra semicolon in declarations.
	* configure.in:  Rewrite target parsing to use simple format.
	Handle sparc-sun-solaris2 configuration.
	* aout64.h:  Avoid ANSI C brain death warning.
	* elf.c:  Avoid trigraph (???) or /* in comments.

Fri Jun 12 14:51:14 1992  david d `zoo' zuhn  (zoo at cirdan.cygnus.com)

	* config/sysv4.mh: new file, RANLIB=echo

	* configure.in: handle Solaris2 as -sysv4 or -solaris2

Thu Jun 11 00:52:03 1992  John Gilmore  (gnu at cygnus.com)

	* elf.c (elf_obj_tdata):  Merge elf_obj_tdata_struct and
	elf_core_tdata_struct into a single common struct.  Core files
	wouldn't have worked at all without this.
	(bfd_elf_find_section):  New function for GDB's undercover use
	to find string sections that BFD hides from it.
	(elf_get_str_section):  Avoid multiple alloc&reads for same data;
	lint.
	(elf_object_p, elf_core_file_p):  Allocate internal file header
	storage dynamically.
	* bfd.c (union {...} tdata):  Remove elf_core_tdata_struct.
	* demo64.c:  Prevent "empty translation unit" warnings from idiots.

Tue Jun  9 17:15:26 1992  Fred Fish  (fnf at cygnus.com)

	* config/{i386v4.mh, ncr3000.mh}:  Update RANLIB, add INSTALL.

Sat Jun  6 17:02:51 1992  John Gilmore  (gnu at cygnus.com)

	* configure.in:  Handle Solaris2 as *-sun-sysv4 or as *-sun-sunos5.

Sun May 31 05:45:00 1992  david d `zoo' zuhn (zoo@cygnus.com)

	* configure.in: handle m680[01234]0 as aliases for m68k

Tue May 26 16:50:59 1992  Steve Chamberlain  (sac@thepub.cygnus.com)
	
	* coff-a29k.c: do byte relocs correctly
	* coffcode.h (styp_to_sec_flags): never load INFO sections
	* seclet.c (rel): don't relocate INFO sections

Wed May 20 08:18:18 1992  Ken Raeburn  (Raeburn@Cygnus.COM)

	* section.c (bfd_*_symbol, bfd_*_section): Initialize statically.
	Make the symbols unmodifiable.
	(bfd_section_init): Deleted.
	* init.c (bfd_init): Don't call bfd_section_init.

	* section.c (bfd_set_section_contents): Ensure that range to be
	written is within section boundaries.
	(bfd_get_section_contents): Likewise.  Don't bother dispatching if
	size is zero.

	* libbfd.c (bfd_xmalloc): Text of error message should be const.

	* coff-i960.c (howto_table): Deleted.
	(howto_rellong, howto_iprmed, howto_optcall): New vars;
	interesting entries from old howto_table.
	(RTYPE2HOWTO): Adjusted to use switch.
	(coff_i960_reloc_type_lookup): New function.

	* coffcode.h (coff_new_section_hook): Allocate storage for aux
	records for section symbol.
	(make_abs_section): Unused; deleted.
	(renumber_symbols): Re-order symbols so undefined symbols come
	last, as COFF format desires.
	(coff_write_symbol): Put C_FILE symbols in debug section always.
	(coff_section_symbol): New function; creates a symbol with the
	same name as a section, and sets up aux records for it.
	(coff_add_missing_symbols): New function; adds section symbols to
	symbol table if they aren't there already.  Should someday also
	add a dummy C_FILE symbol if none is present.
	(coff_write_object_contents): Add missing symbols before preparing
	symbol table to be written.
	(coff_slurp_reloc_table): Verify that symbol indices read in are
	in a reasonable range.
	* libcoff-in.h (struct coff_tdata): New field conv_table_size.
	(obj_conv_table_size): Accessor macro.

	* bout.c (b_out_reloc_type_lookup): New function.  Handles three
	reloc types on i960.

	* bfd-in.h (bfd_get_section_name): New macro.  Like
	bfd_section_name, but returns rvalue, not lvalue.
	(bfd_get_section_vma, bfd_get_section_alignment): Similar.
	(bfd_get_section_flags): Now returns rvalue.

	* reloc.c (enum bfd_reloc_code_real): Add several new values, some
	general, some specific to sparc or i960.

	* aoutx.h (set_section_contents): Set VMA for each section based
	on previous section.  If text section VMA doesn't appear to have
	been set, make a best guess from the type of file.

	* aout-target.h (MY_reloc_howto_type_lookup): Define as zero if
	not defined.
	(MY(vec)): Initialize reloc_type_lookup field.

	* aoutx.h (howto_table_*): Export as aout_#_*_howto_table.
	(bfd_error_trap, bfd_error_vector): Extern, not common.

	* aoutf1.h (sunos4_reloc_type_lookup): New function.  Handles a
	few types of relocs for sparc; will need enhancement.

	* bout.c (callj_callback): Use DEFUN macro in definition.
	* coff-i960.c (optcall_callback): Likewise.

	* targets.c (bfd_target): Added fields reloc_type_lookup and
	_bfd_make_debug_symbol.  Also minor comment changes.
	* syms.c (bfd_make_debug_symbol): New dispatching macro.
	* reloc.c (bfd_reloc_type_lookup): Take a BFD ptr as arg rather
	than arch info, and dispatch with BFD_SEND.  Callers changed.
	* archures.c (struct bfd_arch_info): Deleted field
	reloc_type_lookup.
	* cpu-*.c: Don't initialize that field.

	* bfd-in.h (enum bfd_error): Add new value "bad_value".
	* bfd.c (bfd_errmsgs): Now const; added entry for bad_value.
	(bfd_errmsg): Now returns ptr to const.
	* bfd-in.h (bfd_errmsg): Fix prototype.

	* cache.c (BFD_CACHE_MAX_OPEN): Fix typo in doc.
	* reloc.c (bfd_generic_relax_section): Ditto.

	* section.c (Section Output doc): Improve description of use of
	output_section and output_offset.

Tue May 19 23:42:10 1992  D. V. Henkel-Wallace  (gumby@cygnus.com)

	* sco-core.c: new file from net.
	* aoutx.h (translate_to_native_sym_flags): bugfix from net:
	  Now we have the hairy linker, it's possible to move symbols from
	  one section into another.  Actually make that work!

Sat May 16 17:57:59 1992  K. Richard Pixley  (rich@rtl.cygnus.com)

	* hosts/sun3.h: fix declaration of free.

Tue May 12 14:08:59 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* coff-a29k.c (perform_reloc): fix bug in jmp/call evaluation
	* coff-h8300.c (reloc_processing): all relocs are relative to
	section start.
	* opncls.c: don't use fdopen on DOS systems

	short patches from Glenn Kasten (glenn@ready.com)
	* target.c: enabled oasys support
	* oasys.c:  Insert . when UNDERSCORE_HACK is enabled, 
	fix problem where a relocation which crossed a modification byte
	boundary did not work. Fix problem where a relocation near the end
	of a data record did not work.
	

Tue May  5 18:11:25 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* archive.c (bfd_slurp_coff_armap): old versions of BFD wrote
	archvie header string counts the endian way, this heuristic sees
	how big an archive string to read by trying it one way and if the
	string table is unreasonably big, trying it the other. *FIXME*.
	* opncls.c (bfd_fdopenr): can't do fdopens on VMS

Tue May  5 14:18:24 1992  Per Bothner  (bothner@rtl.cygnus.com)

	* bfd-in.h:  Increase version number to 1.97, for consistency
	with ../binutils.
	* Makefile.in:  docdir is ./doc, not ${srcdir}/doc.

Mon May  4 11:49:15 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

        * bfd-in.h: bump version to 1.96
         Major change; changed calling convention for
	 bfd_get_relocated_section_contents so that caller allocates
	 memory for section data.
	* coffcode.h (bfd_coff_get_relocated_section_contents), reloc.c,
	seclet.c, targets.c, bfd.c: reflect new convention.
	* coffcode.h (styp_to_sec_flags): if styp_flags is not a special
	case, then use reasonable default values for SEC_* flags.

Fri May  1 12:58:34 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* coffcode.h (coff_write_object_contents): use RELSZ to work out
	size of output reloc struct.
	* targets.c, Makefile.in: comment out tekhex for the moment.
	* ieee.c: if some places where null pointers were used instead of &bfd_abs_section.
	* configure.in: tandem target is st2000
	* coff-m68k.c: rename static howto_table to global
	m68kcoff_howto_table.
	* bout.c: remove unnecessary abort
	* coff-a29k.c: various changes to the way relocations work to cope
	with the "new order" and latent bugs.
	* coffcode.h: lint

Wed Apr 29 12:37:07 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* aoutx.h (aout_swap_ext_reloc_out, aout_swap_std_reloc_out)
	bout.c (b_out_squirt_out_relocs): treat abs sumbols the right way.
	* reloc.c (bfd_perform-relocation): don't relocate refs to
	absolute symbols if doing a partial link.

Fri Apr 24 07:35:26 1992  Stu Grossman  (grossman at cygnus.com)

	* configure.in:  Add a29k-amd-udi.

Thu Apr 23 18:37:55 1992  Fred Fish  (fnf@cygnus.com)

	* aoutx.h (aout_<bits>_swap_exec_header_in):  Zero out the
	internal_exec structure before initializing the fields that
	are used, so that the unused fields are in a known state.

Wed Apr 22 09:36:08 1992  Fred Fish  (fnf@cygnus.com)

	* tekhex.c (struct data_struct):  Convert from typedef that
	typedefs nothing to a normal structure declaration.
	* tekhex.c (pass_over):  Prototype args for function that 
	second arg points to.

Mon Apr 20 22:22:51 1992  K. Richard Pixley  (rich@rtl.cygnus.com)

	* Makefile.in: remove old style staging.  Do not print recursion
	  lines.

	* Makefile.in: rework CFLAGS so that CFLAGS can be passed from the
	  Makefile command line.  Remove MINUS_G.  Default CFLAGS to -g.
	  Pass CFLAGS.

Fri Apr 17 09:15:31 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* bfd.c, Makefile.in: added tekhex
	* aoutx.h (set_section_contents): pages should be padded to the
	size of a page, not the size of a segment.
	* configure.in: added go32 host and i386-aout target.
	* i386aout.c, libaout.h: now works for go32 target
	* ieee.c: fix bit rot.
	* seclet.c: support for padding seclet type.

Wed Apr 15 18:11:58 1992  K. Richard Pixley  (rich@rtl.cygnus.com)

	* Makefile.in: added .NOEXPORT:

Tue Apr 14 14:34:42 1992  Fred Fish  (fnf@cygnus.com)

	* elf.c (bfd_add_strtab, bfd_add_2_to_strtab):  CONST spreads
	like ooze.
	* elf.c (elf_compute_section_file_positions,
	elf_write_object_contents):  Return boolean, not NULL (which
	can be void *).
	* elf.c (bfd_section_from_shdr):  Ifdef-out debugging code.
	Also ifdef-out code that aborts on unhandled section types.

Fri Apr 10 22:29:18 1992  Fred Fish  (fnf@cygnus.com)

	* configure.in:  Recognize ncr3000 config
	* Makefile.in (MINUS_G):  Pass on to recursive makes.
	* hosts/ncr3000.h, config/ncr3000.mh:  Add host config files.

Thu Apr  2 17:42:45 1992  John Gilmore  (gnu at cygnus.com)

	* Makefile.in:  Now that we have sym.h and symconst.h, compile
	coff-msym.c on all systems.
	* config/{decstation.mh, irix3.mh, irix4.mh}:  Remove coff-msym.o dep.
	* coff-msym.c:  Update include files and comments; add weakext bit.

Wed Apr  1 23:16:38 1992  John Gilmore  (gnu at cygnus.com)

	* archive.c, bfd.c, bout.c, coffcode.h, init.c, reloc.c,
	section.c, srec.c, syms.c, coff-h8300.c:  Lint.

Sun Mar 29 09:37:59 1992  John Gilmore  (gnu at cygnus.com)

	* bout.c, coff-a29k.c, coff-i960.c:  Lint.
	* configure.in:  Add new host and target configs.
	* elf.c (bfd_prstatus, bfd_fpregset):  Avoid typename of register
	structs, which vary; just use member name. 
	(elf_object_p, elf_core_file_p):  Lint, fix comments.
	* config/sparc-elf.mt, hosts/sysv4.h:  New config files.	

Sat Mar 28 13:07:02 1992  Fred Fish  (fnf@cygnus.com)

	* elf.c (elf_object_p, elf_core_file_p):  Fix to use only a single
	local, disposable, copy of the external form of section header
	table and program header table entries.

Thu Mar 26 16:59:58 1992  John Gilmore  (gnu at cygnus.com)

	* Makefile.in:  Set MINIMIZE back to 0 for a real release.

Tue Mar 24 15:57:03 1992  K. Richard Pixley  (rich@cygnus.com)

	* configure.in: config/irix4.m[ht], hosts/irix4.h: add support for
	  irix4.

Mon Mar 23 22:37:34 1992  Stu Grossman  (grossman at cygnus.com)

	* coff-msym.c (ecoff_swap_rfd_in):  remove & for array ref.

Tue Mar 17 14:12:25 1992  Per Bothner  (bothner@rtl.cygnus.com)

	* bout.c (b_out_slurp_reloc_table):  Use BFD_ASSERT macro,
	not internal bfd_assert function (twice).

Tue Mar 17 10:45:12 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* aout-target.h: change ar_max_namelen to 15 (the right value)
	* coff-a29k, coffcode.h: more hangovers from the bfd_abs_section
	change

Mon Mar 16 14:57:22 1992  Steve Chamberlain  (sac@rtl.cygnus.com)

	* archive.c (bfd_generic_archive_p): check for bout archives too.
	* bout.c: make it work again.

Sat Mar 14 17:30:40 1992  Fred Fish  (fnf@cygnus.com)

	* elf.c (elf_corefile_note):  Call bfd_xmalloc() instead of bare
	malloc().
	* reloc.c (bfd_generic_get_relocated_section_contents):  Call
	bfd_xmalloc() instead of bare malloc().

Fri Mar 13 15:44:37 1992  K. Richard Pixley  (rich@cygnus.com)

	* Makefile.in: pass down MAKEINFO on info.

Fri Mar 13 07:41:13 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* config/mt-<foo> now <foo>.mt, config/mh-<foo> now <foo>.mh.
	host/h-<foo> now just <foo>. 
	* configure.in: reflect changes

Thu Mar 12 11:15:02 1992  Per Bothner  (bothner@cygnus.com)

	* libbfd-in.h (set_tdata):  Make change of Feb 27 in the
	actual source file, not just the generated libbfd.h.

Sat Mar  7 10:33:41 1992  Steve Chamberlain  (sac@thepub.cygnus.com)

	* coff-i960.c (icoff_little_vec): add COFF_SWAP_TABLE so we can run
	gdb on little-endian 960 code. 
	* archive.c (compute_and_write_armap): indirect symbols should go
	into the archive header too.

Fri Mar  6 21:55:16 1992  K. Richard Pixley  (rich@cygnus.com)

	* Makefile.in: added check target.

Thu Mar  5 23:51:42 1992  John Gilmore  (gnu at cygnus.com)

	* coff-msym.c:  Move this file from gdb/ecoff.c.  It
	handles byte-swapping for ECOFF (MIPS symbol) files.
	* config/mh-decstation, config/mh-irix3:  Add coff-msym.o
	to the files built on MIPS-based hosts.
	* Makefile.in:  Add rule for coff-msym.

Thu Mar  5 21:36:05 1992  K. Richard Pixley  (rich@cygnus.com)

	* Makefile.in: added clean-info target.  MINIMIZE=1.

Sun Mar  1 22:32:58 1992  Per Bothner  (bothner@cygnus.com)

	* coff-rs6000.c:  Move core file functions into separate
	new file rs6000-core.c.  This is needed because reading
	core files depends on native include files that conflict
	with ../include/coff/rs6000.h.
	* config/mh-rs6000:  Add rs6000-core.o to HDEPFILES.

Thu Feb 27 22:19:55 1992  Per Bothner  (bothner@cygnus.com)

	* aoutx.h (NAME(aout,print_symbol)): Don't print
	symbol addresss for undefined symbols.
	* coff-rs6000.c:  Various updates (due to target-
	independent changes).
	* libbfd.h:  Ditto (tdata field is now a union).
	* hosts/h-sparc.h:  Removed prototype for bogus function
	'emset' (presumably should have been 'memset' - which is there).

Thu Feb 27 11:46:33 1992  John Gilmore  (gnu at cygnus.com)

	* configure.in (mips-big-* target):  Same is Iris.

Thu Feb 27 09:24:56 1992  Steve Chamberlain  (sac at thepub.cygnus.com)

	* aoutx.h (translate_from_native_sym_flags): when creating an
	alias symbol, fill in the section as undefined, rather than
	leaving it blank. If an output section can't be found for a
	symbol, then don't core dump.

Wed Feb 26 18:04:40 1992  K. Richard Pixley  (rich@cygnus.com)

	* Makefile.in, configure.in: removed traces of namesubdir,
	  -subdirs, $(subdir), $(unsubdir), some rcs triggers.  Forced
	  copyrights to '92, changed some from Cygnus to FSF.

Wed Feb 26 19:40:59 1992  Steve Chamberlain  (sac at thepub.cygnus.com)

	* bfd.c: lint
	* coff-h8300.c: fix stupid reloc subtraction bug
	* coffcode.h (coff_swap_aux_out): only swap a tvndx by 2 bytes,
	since that's how wide it is. (coff_slurp_symbol_table): always zero out
	the symbol.flags and done_lineno fields.

Tue Feb 25 14:29:24 1992  Steve Chamberlain  (sac at rtl.cygnus.com)

	* coffcode.h (coff_write_symbol): write out the correct number of
	auxents. 
	* cpu-h8300.c: fix disassembly bug

Fri Feb 21 21:39:56 1992  John Gilmore  (gnu at cygnus.com)

	* bfd-in.h (bfd_errmsg), coffcode.h (coff_swap_aux_in,
	section_from_bfd_index), cpu-h8300.c (howto*_callback),
	reloc.c, section.c (bfd_map_over_sections), targets.c
	(bfd_target_list):  Protolint.
	* libbfd.h:  Update to match a libbfd-in.h from a month ago.

Fri Feb 21 10:57:54 1992  Steve Chamberlain  (sac at rtl.cygnus.com)

	* coffcode.h (coff_swap_aux_in): lint, (coff_print_symbol): prints
	out tagndx too.
	* aoutx.h (swap_std_reloc_out, swap_ext_reloc_out): use the output
	section of a symbol rather than the section of a reffed symbol to
	determine the r_index of an emmitted reloc.

Thu Feb 20 18:10:34 1992  Per Bothner  (bothner at cygnus.com)

	* PORTING: New (preliminary) porting guide.

Wed Feb 19 21:39:37 1992  John Gilmore  (gnu at cygnus.com)

	* bout.c (callj_callback), coff-a29k.c (a29k_reloc), coff-m88k.c
	(howto_hvrt16):  lint.

Mon Feb 17 12:02:17 1992  Per Bothner  (bothner at cygnus.com)

	* hp300bsd.c (new), config/mt-hp300bsd:  Make hp300bsd
	a full configuration (with possible cross-development),
	instead of using host-aout.c.

Sun Feb 16 13:01:49 1992  Per Bothner  (bothner at cygnus.com)

	* aout-target.h (MY(write_object_contents):
	Set obj_reloc_entry_size (abfd).
	* gen-aout.c:  Change to emit a .c files, not a .h file.

Thu Feb 13 20:11:47 1992  Fred Fish  (fnf at cygnus.com)

	* elf.c (elf_slurp_symbol_table):  Remove obsolete use of
	BSF_ABSOLUTE and replace with bfd_abs_section reference.

Thu Feb 13 17:22:44 1992  Steve Chamberlain  (sac at rtl.cygnus.com)

	* coffcode.h (get_normalized_symtab): fixed bug where symbols
	with more than one auxent can cause nasty core dumps. 

	* coffcode.h, libcoff.c: added new fielded to coff_symbol_struct
	"done_lineno" so that a symbol which appears twice in the symbol
	table only gets it's linenumbers relocated once. Modifed
	(coff_write_native_symbol) and (coff_make_empty_symbol) to make
	use of it.

Tue Feb  4 15:39:55 1992  Steve Chamberlain  (sac at rtl.cygnus.com)

	* aoutx.h: (translate_from_native_sym_flags): fix constructor
	stuff to use the New Order.

Fri Jan 31 01:34:45 1992  Stu Grossman  (grossman at cygnus.com)

	* ieee.c:  Change type of envi[] to unsigned char.

	* configure.in:  fix vax ultrix configuration.

	* elf.c (bfd_section_from_shdr):  Deal with null return from
	bfd_make_section().  (elf_object_p):  Select endianess properly.

Fri Jan 31 01:19:55 1992  John Gilmore  (gnu at cygnus.com)

	* hosts/h-tahoe.h, h-vaxbsd.h:  Fix stack in core files.

Thu Jan 30 23:51:07 1992  John Gilmore  (gnu at cygnus.com)

	* Makefile.in:  host-aout.c doesn't depend on aout-params.h.
	* aout-target.h:  Use TARGET_BIG_ENDIAN_P to set up vector.
	* host-aout.c:  Don't use aout-params.h; configure these systems
	in their xm files, not in a randomly generated file.
	* hosts/h-hp300bsd.h, h-tahoe.h, h-vaxbsd.h, h-vaxult.h:
	Specify byte order.
	* hosts/h-vaxbsd.h:  Define the form of exec and core files.

Thu Jan 30 13:02:41 1992  Per Bothner  (bothner at cygnus.com)

	* config/mt-tahoe, config/mt-vax:  Change DEFAULT_VECTOR to
	host_aout_vec here as well.

Thu Jan 30 11:41:45 1992  Stu Grossman  (grossman at cygnus.com)

	* host-aout.c:  Change TARGETNAME to "a.out" to be compatible with
	gdb.  config/mt-hp300bsd:  Change DEFAULT_VECTOR to host_aout_vec
	to prevent undefined symbol.

Thu Jan 30 07:26:53 1992  Steve Chamberlain  (sac at rtl.cygnus.com)

	Various lints found on PersSony
	* aoutx.h: cast an enum 
	* coff-a29k.c: many ints in reloc structure turned to enum
	* coffcode.h: more enums
	* cpu-h8300.c: more enums
	* opncls.c: more enums

Thu Jan 30 01:19:56 1992  John Gilmore  (gnu at cygnus.com)

	* configure.in:  Make Tahoe configuration work again.
	* bfd-in.h:  Remove trailing comma from enum declaration.
	* ieee.c:  Can't put byte values >0x7F into a signed char.

Tue Jan 28 21:10:51 1992  Fred Fish  (fnf at cygnus.com)

	* Makefile.in:  Add dependencies for various coff-*.o files.

	* elf.c:  Remove extraneous paren from core_prpsinfo and
	core_prpstatus macros, rename core_prpstatus to core_prstatus.
	Replace references to old section "size" member with new
	"_raw_size" member.  Implement elf_make_empty_symbol, which
	is now used.

Tue Jan 28 14:51:40 1992  Stu Grossman  (grossman at cygnus.com)

	* trad-core.c, bfd.c, ../include/bfd.h:  Various fixes for PMAX
	core reading.

Tue Jan 28 10:46:32 1992  Steve Chamberlain  (sac at rtl.cygnus.com)

	* coffcode.h (bfd_coff_relax_section): now static.
	(bfd_coff_get_relocated_section_contents): various type lints.

Mon Jan 27 19:44:08 1992  Steve Chamberlain  (sac at rtl.cygnus.com)

	New entry point in the transfer vector - bfd_relax_section.

	* aout-target.h: add to vector, call generic_relax
	* bfd-in.h: add to vector
	* bfd.c: add #define for vector
	* bout.c: add to vector, call generic_relax
	* coffcode.h: add to vector, also now has coff specific relax code
	for the relaxable H8/300 relocs. Also clean up abs section cruft.
	* elf.c: call generic_relax
	* ieee.c: call new vector, clean up some bugs due to the creation
	of bfd_abs_section
	* libbfd.h: add bfd_generic_relax_section EXFUN
	* oasys.c: call generic_relax
	* reloc.c: implement generic_relax
	* seclet.c: moved much of this into coffcode.h
	* srec.c: call generic_relax
	* targets.c: define new transfer vector

Fri Jan 24 14:40:17 1992  Steve Chamberlain  (sac at rtl.cygnus.com)

	* everything: now modified to use smaller reloc type. Self hosts
	on sun3 & sun4.

Sat Jan 18 17:00:16 1992  Fred Fish  (fnf at cygnus.com)

	* config/mh-stratus, config/mt-i860-elf, hosts/h-stratus:
	New files for stratus.

	* configure.in:  Add configuration fragments for stratus.

Wed Jan 15 10:02:43 1992  Fred Fish  (fnf at cygnus.com)

	* aoutx.h (NAME(aout,find_nearest_line)): Declare various filename
	variables as CONST since they are set to point to a const char
	string.  Fixes compiler complaints.

Fri Jan 10 17:44:53 1992  Fred Fish  (fnf at cygnus.com)

	* hosts/h-amix.h hosts/h-i386v4.h:  Change abort() to a function
	returning void.

Fri Jan 10 14:33:32 1992  Per Bothner  (bothner at cygnus.com)

	* aoutx.h (NAME(aout,find_nearest_line)):  Recognize N_SOL
	symbols, so that we can emit the correct file name even
	if it's an include file.

Thu Jan  2 16:43:34 1992  John Gilmore  (gnu at cygnus.com)

	* coff-i960.c:  Add COFF_SWAP_TABLE to little_vec as well as big_vec.
	(Reported by john@labtam.labtam.oz.au (John Carey)).

Wed Jan  1 04:23:06 1992  Fred Fish  (fnf at cygnus.com)

	* elf.c:  Change all '#if HAVE_PROCFS' to '#ifdef HAVE_PROCFS'.

	* config/mh-amix, config/mh-i386v4:  Remove HDEFINES that was
	being used to -DHAVE_PROCFS.

	* hosts/h-amix, hosts/h-i386v4:  Add '#define HAVE_PROCFS'.  Move
	'#include "fopen-same.h"' to end of file to match other h-* files.

Fri Dec 20 12:06:17 1991  Fred Fish  (fnf at cygnus.com)

	* configure.in:  Change svr4 references to sysv4.  Add case
	"unknown" for target vendor and infer some targets based
	on the specified operating system.

Wed Dec 18 17:17:59 1991  Stu Grossman  (grossman at cygnus.com)

	* bfd-in.h, libaout.h:  ANSIfy enums.

Wed Dec 18 16:12:25 1991  Steve Chamberlain  (sac at rtl.cygnus.com)

	* archive.c (normalize): created version for VMS which removes the
	VMS directory crap from the front and end of a filename, eg turn
	[-.foo]bar.obj;123 into bar.obj
	(bfd_construct_extended_name_table): now writes index into an
	extended name table in decimal - the same base used to read an
	extended name table.

Wed Dec 18 14:40:39 1991  Per Bothner  (bothner at cygnus.com)

	* aout-encap.c:  Fix to use aout-target.h.
	* aoutf1.h:  Use standard MY_object_p and MY_callback
	in aout-target.h.  Remove target-specific versions.
	* host-aout.c:  Re-write to use aout-target.h.
	* gen-aout.c:  New files use with host-aout.c to generate
	host-specific a.out-related parameters.
	* Makefile.in:  host-aout.o depends on aout-params.h, which is
	generated by gen-aout.
	* aout-target.h:  Make a little more flexible.
	* libaout.h, aout-target.h:  Removed WORK_OUT_FILE_POSTIONS
	macro.  Instead, inline it in aout-target.h.
	* newsos3.c:  Define N_SHARED_LIB(x) as 0 to avoid
	a gcc -Wall warning.
	* archive.c:  Add missing commas in DEFUN macro (2 places).
	* elf.c, coffcode.h, aoutf1.h:  Use ANSI functions instead of
	Berkeley ones, now that libiberty has them:
	bcopy->memcpy, bzero->memset, bcmp->memcmp.
	* aoutx.h:  Various touch-ups:  Re-formatting, fix a cast,
	remove unused variable.

Tue Dec 17 19:48:59 1991  Fred Fish  (fnf at cygnus.com)

	* elf.c (elf_core_file_matches_executable_p):  Enclose corename
	and execname inside HAVE_PROCFS ifdef since they are unused
	when it is not defined.

Mon Dec 16 12:00:10 1991  Fred Fish  (fnf at cygnus.com)

	* elf.c:  Flag all sections as either code or data.  We can't
	be sure what they are anyway, since ELF doesn't fit the
	traditional model of text+data+bss very well.  Add new local
	function elf_read() to simplify code.  Record entry point in
	the bfd structure.

Thu Dec 12 21:01:22 1991  John Gilmore  (gnu at cygnus.com)

	* hosts/h-*.h:  Configure fopen using ../include/fopen-*.h
	rather than N copies of the same lines.

Wed Dec 11 16:39:45 1991  Steve Chamberlain  (sac at rtl.cygnus.com)

	* cpu-h8300.c: disassemble branch displacements correctly
	* coff-h8300.c: put reloc offsets out in 32bits

	* makefile.dos, configdj.bat: New files from DJ
	* cache.c: fopen with new macros is needed for DOS.
	* ieee.c: environ renamed to envi to stop an include file
	conflict.
	* opncls.c, coff-rs6000.c: more fopens with macros.

Tue Dec 10 04:07:24 1991  K. Richard Pixley  (rich at rtl.cygnus.com)

	* Makefile.in: infodir belongs in datadir.

Sat Dec  7 16:39:23 1991  Steve Chamberlain  (sac at rtl.cygnus.com)

	 * Makefile.in: fix where docdir lives

	 * aoutx.h, archive.c, archures.c, bfd.c, cache.c, coff-m88k.c,
	 coffcode.h, core.c, ctor.c, elf.c, format.c, ieee.c, init.c,
	 libbfd.c, libbfd.h, libcoff.h, opncls.c, reloc.c, section.c,
	 srec.c, syms.c, targets.c : all new documentation and lint
	 removal.


Sat Dec  7 07:22:09 1991  John Gilmore  (gnu at cygnus.com)

	* coffcode.h, srec.c:  Lint.

Fri Dec  6 22:58:48 1991  K. Richard Pixley  (rich at rtl.cygnus.com)

	* Makefile.in: install using INSTALL_DATA, added standards.text
	  support.

	* configure.in: mark directory as target dependent.  configure
	  nows works in objdir always so make file existence checks
	  against ${srcdir}.

Thu Dec  5 22:46:19 1991  K. Richard Pixley  (rich at rtl.cygnus.com)

	* Makefile.in: idestdir and ddestdir go away.  Added copyrights
	  and shift gpl to v2.  Added ChangeLog if it didn't exist. docdir
	  and mandir now keyed off datadir by default.

Wed Dec  4 10:14:17 1991  Steve Chamberlain  (sac at rtl.cygnus.com)

	* aoutf1.h (sunos_<size>_object_p, sunos4_callback): moved the
	computation of arch and machine type so it's worked out before
	some_aout_object_p is called. 
	* aoutx.h: (some_aout_object_p): don't set arch and mach to
	unknown.
	* archures.c: add extra field 'section_align_power' to hold
	default section alignment in object files.
	* cpu-a29k.c, cpu-h8300.c, cpu-i386.c, cpu-i960.c, cpu-m68k.c,
	cpu-m88k.c, cpu-mips.c, cpu-rs6000.c, cpu-sparc.c, cpu-vax.c:
	initialize the new field.
	* bout.c (b_out_callback): replace the text size, since aout
	fries them.
	* aoutx.h: Documentation in the new style

Wed Dec  4 02:00:30 1991  John Gilmore  (gnu at cygnus.com)

	* bfd.c (bfd_get_mtime):  Don't cache mtime any more; only
	use the saved value if mtime_set is already set (intended
	for archive files, though apparently not used yet).

Tue Dec  3 22:54:50 1991  John Gilmore  (gnu at cygnus.com)

	* targets.c:  Revise comments about how to configure the target
	vector, to match reality.  Remove mention of obsolete methods.
	Remove long lists of capitalized macros that turn into the same
	thing in lowercase.  Normal vector simply lists all known
	lowercase xvec names; all other cases are handled by SELECT_VECS.

	* config/mt-i386-coff:  Set DEFAULT_VECTOR to real identifier,
	not macro name.

	* config/mt-i960-{coff,bout}:  Use SELECT_VECS to make a short
	list of supported targets.

Tue Dec  3 14:06:15 1991  Per Bothner  (bothner at cygnus.com)

	* archive.c (bsd_write_armap):  The pad byte sometimes added to
	the string table in a __.SYMDEF member is now
	counted as part of the size of the string table.
	This is compatible with the old ranlib, as well as Sun's.

Tue Dec  3 10:53:30 1991  Steve Chamberlain  (sac at rtl.cygnus.com)

	* srec.c: Rewrote to fix many bugs; now gets the record type
	right, doesn't choke on input, sets the start address in an S9 and
	fills in the filename on an S0.

Sat Nov 30 21:19:15 1991  Steve Chamberlain  (sac at rtl.cygnus.com)

	* cpu-h8300.c: Add support for MEMIND addressing mode

	* coff-a29k.c: defined RELOC_PROCESSING to take the #ifdef out of
	coffcode.h
	* coffcode.h: use the new macro if available

	* elf.c (elf_corefile_note): cast malloc to avoid warning.
	* Makefile.in: Fixed dependencies due to file rename

	* aout-encap.c, aoutf1.h, aoutx.h, archive.c, bout.c, coff-a29k.c,
	coff-h8300.c, coff-i386.c, coff-i960.c, coff-m68k.c, coff-m88k.c,
	coff-mips.c, coff-rs6000.c, cpu-h300.c, elf.c, i386aout.c,
	newos3.c, stab-syms.c, syms.c: All these files have had their
	#includes altered to point to the new places.

Fri Nov 29 20:04:49 1991  Fred Fish  (fnf at cygnus.com)

	* config/mh-i386v4, config/mh-i386-elf, hosts/h-i386v4.h:  New files.

	* configure.in:  Add vendor "ncr" as supported per-target vendor.
	Add svr4 case for i386 per-host case.

	* elf.c (elf_object_p, elf_core_file_p):  Add missing "break" to
	ELFDATA2LSB cases.

Fri Nov 29 12:16:51 1991  Per Bothner  (bothner at cygnus.com)

	* syms.c (bfd_decode_symclass):  Return 'A'
	for symbols that are both absolute and global.
	* archive.c (bfd_special_undocumented_glue):  Return NULL
	if bfd_ar_hdr_from_filesystem returns NULL.

Tue Nov 26 09:10:55 1991  Steve Chamberlain  (sac at cygnus.com)

	* Makefile.in: added coff-h8300
	* configure.in: now h8 is a coff target
	* cpu-h8300.c: fix various disassembly problems
	* libcoff.h: took out some code which has been #0ed for a long
	time.
	* targets.c: added h8 coff 
	* coff-a29k.c, coff-i386.c, coff-i960.c, coff-m68k.c, coff-m88k.c
	added new macro RTYPE2HOWTO to take a load of #ifdefs out of
	coffcode.h
	* coffcode.h: Started to change the way machine dependencies are
	handled, from the nest of #ifdefs to macros defined in the
	including coff-<foo>.c

Fri Nov 22 08:11:42 1991  John Gilmore  (gnu at cygnus.com)

	* aoutx.h (some_aout_object_p):  Set the `executable' bit
	if the entry point is contained in the text segment, even if the
	text segment is at location 0.

	* coff-mips.c, coffcode.h:  Peter Schauer's patch to kludge in
	nonstandard MIPS sections (.rdata, .sdata, etc).

	* aoutx.h, bfd.c, coffcode.h, ieee.c, oasys.c, targets.c: CONST lint.
	* libbfd-in.h, libbfd.h, aoutx.h, coffcode.h, elf.c, libaout.h:
	Rename ALIGN to BFD_ALIGN to avoid conflict with BSD <sys/param.h>.
	* libbfd.c:  Lint.
	* host-aout.c, trad-core.c:  Fix write_armap prototypes.  Lint.

Thu Nov 21 19:56:40 1991  Per Bothner  (bothner at cygnus.com)

	* stab-syms.c, syms.c:  Moved bfd_stab_name() and bfd_stab_names[]
	from syms.c to new file stab-syms.c.  Also, since GNU extended
	type codes such as N_SETT are no longer in ../include/stab.def,
	include them manually.
	* stab-syms.c, aoutx.h: Renamed bfd_stab_name() and
	bfd_stab_names[] to aout_stab_name() and aout_stab_names[].
	* libaout.h: Added prototype for aout_stab_name().
	* Makefile.in:  Update Makefile for new stab-syms.[co].

Thu Nov 21 11:50:49 1991  John Gilmore  (gnu at cygnus.com)

	* libaout.h (WORK_OUT_FILE_POSITIONS):  One more try at this
	rather complicated seeming problem.  Eliminate LOGICAL_ versions,
	just make N_XXX work by excluding the header from the text segment.
	* aoutx.h:  Fix comments to match.

Tue Nov 19 18:49:01 1991  Per Bothner  (bothner at cygnus.com)

	* libaout.h (WORK_OUT_FILE_POSITIONS):  Use new LOGICAL_TXTADDR,
	LOGICAL_TXTOFF, LOGICAL_TXTSIZE macros to figure out numbers
	for the "logical" text segment (i.e. never consider the exec
	header to be part of the text segment).  This change is
	needed for consistency with various other parts of bfd and ld.
	* aoutx.h (NAME(aout,soe_aout_object_p)):  Fix comment,
	and move calculation of obj_textsec(abfd)->size to libaout.h.
	* bfd-in.h:  Removed bogus ';'.

	* Makefile.in:  Add MINIMIZE flag to select lean
	or bloated target_vector.
	* targets.c:  Use new MINIMIZE macro, and add trad_core if needed.
	* newsos3.c:  Fixes to ../include/aout64.h remove need
	for special N_TXTOFF macro, but require N_HEADER_IN_TEXT.

Mon Nov 18 12:00:59 1991  Per Bothner  (bothner at cygnus.com)

	* aout-target.h, aoutf1.h, newsos3.c:  Make aout-target.h
	handle both little and big-endian targets, with little
	the default unless TARGET_IS_BIG_ENDIAN_P is defined.
	* host-aout.c:  Add FIXME note.

Sun Nov 17 13:29:39 1991  Per Bothner  (bothner at cygnus.com)

	* targets.c:  Make the default target_vector contain
	just &DEFAULT_VECTOR.  This makes executables a lot smaller.
	Old behavior can be gotten by defining ALL_TARGETS.
	* aoutf1.h, demo64.c, i386aout.c, newsos3.c, sunos.c:
	Factored out common code into new file aout-target.h.
	Saves a lot of duplicate code for a.out variants.

Fri Nov 15 13:00:43 1991  Per Bothner  (bothner at cygnus.com)

	Get 'make headers' to work when configured with +subdirs.
	* Makefile.in: Add $(subdir) to docdir path.
	* doc/Makefile.in (protos): Add $(srcdir) prefix
	to name of sed scripts.

Thu Nov 14 19:49:10 1991  Per Bothner  (bothner at cygnus.com)

	* aoutx.h (NAME(aout,print_symbol)):  Fix thinko.
	* syms.c (bfd_stab_names):  Turn on new GNU_EXTRA_STABS macro
	to include names of N_SETT etc.

Thu Nov 14 19:11:13 1991  Fred Fish  (fnf at cygnus.com)

    	* elf.c:  Add minimal support for ELF symbol tables.  Generates
	canonical bfd symbol tables from ELF symbol tables.  Change the
	name of some functions from bfd_<name> to elf_<name>.

	* syms.c:  Trivial fix to comment to remove a redundant "to".

Wed Nov 13 17:02:01 1991  John Gilmore  (gnu at cygnus.com)

	* coff-{i386,m68k,m88k}.c:  Change name of file format to standard
	form that GDB recognizes as COFF.

Wed Nov 13 09:09:41 1991  Steve Chamberlain  (sac at cygnus.com)

	* ieee.c (ieee_object_p):  cast NULL correctly.
	* configure.in: added harris host

	* coff-a29k.c: Lots of changes, most from David Wood.

Tue Nov 12 07:21:41 1991  John Gilmore  (gnu at cygnus.com)

	* coff-m88k.c (coff_write_armap):  Just #undef it.

Mon Nov 11 20:30:18 1991  Steve Chamberlain  (sac at cygnus.com)

	* Makefile.in: standardize on MINUS_G to disable debugging
	* coff-m88k.c: create coff armaps instead of bsd ones.
	* opncls.c (bfd_close_all_done), (bfd_close): Mask out random bits
	when calling chmod.

Mon Nov 11 19:07:32 1991  Fred Fish  (fnf at cygnus.com)

	* elf.c:  Additions to support ELF format core files.
	* config/mh-amix:  Add -DHAVE_PROCFS to HDEFINES, since host
	has support for /proc (all the include files in particular).

Mon Nov 11 18:36:47 1991  Per Bothner  (bothner at cygnus.com)

	* aoutx.h (NAME(aout,find_nearest_line)):  Handle the case
	of two N_SO stabs, one for directory, and one for filename.

	* bfd-in.h (print_vma):  Factor out duplicate definition.

	Exit a little more gracefully when malloc returns NULL.
	* libbfd.c: New function bfd_xmalloc (malloc wrapper).
	* opncls.c, syms.c, bout.c, aoutx.h:  Replace malloc by bfd_xmalloc.
	* libbfd.h: Rre-generated due to libbfd.c update.

Sat Nov  9 13:45:01 1991  Fred Fish  (fnf at cygnus.com)

	* config/mt-m68k-elf:  Define DEFAULT_VECTOR as elf_big_vec.

	* elf.c (elf_object_p):  Don't try to create a bfd section for
	the first ELF section header.  It is just a placeholder.

Sat Nov  9 03:04:26 1991  John Gilmore  (gnu at cygnus.com)

	* coff-rs6000.c, config/mh-rs6000:  Make it work on archive and
	core files, when compiling native.
	* hosts/h-rs6000.h:  Define FASCIST_FDOPEN for bfd_fdopenr.

	FIXME:  The aoutf1.h change below needs to be reversed back
	to the way it was.

Thu Nov  7 11:03:55 1991  Steve Chamberlain  (sac at rtl.cygnus.com)

	* coffcode.h: Defined new macros [PUT|GET]LINENO_LNNO for
	manipulation of lnno fields in lineno structs in a coff-<f>.h
	independent way. Override it in coff-<f>.h to your favourite
	number if you don't have a 16bit lnno field. (coff_swap_lineno_in)
	(coff_swap_lineno_out): modified to use the new macros.

Mon Nov  4 11:38:33 1991  Steve Chamberlain  (sac at cygnus.com)

	* aoutf1.h (sunos4_callback): Now defaults to 68020 rather than
	unknown arch when the magic number doesn't specify the
	architecture, since some OSs (eg old sun3s) don't set the number, and
	020 is probably the right answer anyway.

Sun Nov  3 12:07:08 1991  Per Bothner  (bothner at cygnus.com)

	* hosts/h-news.h, hosts/h-rtbsd.h:
	Get rid of MISSING_VFPRINTF, since libiberty provides one.
	* bfd-in.h (bfd_print_symbol_type_hopw enum):   Add new option
	bfd_print_symbol_nm, for use by nm.
	* aoutx.h (NAME(aout,print_symbol)):  Add code for new
	bfd_print_symbol_nm option, to print in nm format.
	* coffcode.h (coff_print_symbol), ieee.c (ieee_print_symbol)
	oasys.c (oasys_print_symbol):  Provide stub implementations
	for bfd_print_symbol_nm.
	* syms.c:  New function bfd_decode_symclass, used by nm printer.
	New function bfd_stab_name to look up string name of stab code.

Sat Nov  2 14:26:03 1991  Steve Chamberlain  (steve at cygnus.com)

	* Makefile.in: Added ctor.c 
	* archures.c (bfd_default_arch_struct) added
	bfd_default_reloc_type_lookup.
	* coffcode.h: removed a load of #if 0ed code.
	(coff_compute_file_section_positions): now works out the section
	alignment and size correctly in all cases.
	(coff_get_symtab): looks for constructor symbols and calls the
	right function when they're found. (coff_canonicalize_reloc):
	knows when a section is full of constructors and does the right
	thing. 
	* cpu-m88k.c: Added default_reloc_type lookup to the architecture
	description.
	* libbfd-in.h: (bfd_default_reloc_type_lookup) defun  added.
	* libcoff.h: removed #if 0ed code
	* reloc.c: (bfd_reloc_code_real_type) added BFD_RELOC_CTOR for
	arch independent constructor relocation type.
	(bfd_reloc_type_lookup): removed the comment "this will go away"
	since it won't. (bfd_howto_32): stolen from 88k, this is a 32bit
	reloc which is used when BFD_RELOC_CTOR falls through to give a
	default 32bit reloc for constructors.
	(bfd_default_reloc_type_lookup): added.
	* aoutf1.h: fixed SEGMENT_SIZE typo.

Thu Oct 31 18:23:06 1991  John Gilmore  (gnu at cygnus.com)

	* coff-rs6000.c:  Change name to "aixcoff-rs6000", to avoid
	matching prefix "coff".
	* coffcode.h (coff_swap_aux_in, coff_swap_aux_out):  Handle
	rs/6000 csect records.

Sun Oct 27 16:56:58 1991  Steve Chamberlain  (steve at cygnus.com)

	* coff-m88k.c, targets.c: change name of m88k_bcs to m88kbcs
	* configure.in: add motorola delta88 cases
	* libbfd.h, libbfd-in.h, archive.c, ieee.c, elf.c, srec.c: fix
	write_armap prototype
	* libbfd.c: add doc on bfd_write_bigendian_4byte_int

Fri Oct 25 02:48:19 1991  John Gilmore  (gnu at cygnus.com)

	* Rename COFF-related files in `coff-ARCH.c' form.
	coff-a29k.c, coff-i386.c, coff-i960.c, coff-m68k.c, coff-m88k.c,
	coff-mips.c, coff-rs6000.c to be exact.

	* Makefile.in:  Only supply TARGET_DEFAULTS to targets.c, reducing
	make output clutter.
	* config/mt-*:  Ditto.

Thu Oct 24 22:40:07 1991  John Gilmore  (gnu at cygnus.com)

	RS/6000 support, by Metin G. Ozisik, Mimi Phng-Tho V, and
	John Gilmore.  Archive support from Damon A. Permezel.

	* Makefile.in:  Add cpu-rs6000.c and rs6000coff.c.
	* configure.in:  Add rs6000 case.
	* targets.c:  Add rs6000 vector.
	* archures.c:  Add rs6000, fix comment on romp.
	* bfd-in.h (enum bfd_error):  Add no_debug_section error.
	* libcoff-in.h (struct coff_tdata):  Remove unused string_table.
	* bfd.c (bfd_errmsgs):  Add no_debug_section error message.
	* section.c (bfd_make_section):  Return NULL on attempt to create
	a section twice.
	* coffcode.h (bfd_swap_reloc_in):  Handle r_type and r_size.
	(bfd_swap_aouthdr_in):  Handle lots more members.
	(make_a_section_from_file):  If section has already been seen,
	just return false rather than overwriting it.
	(coff_real_object_p):  Understand incoming magic numbers.
	(coff_set_flags):  Understand outgoing magic numbers.
	(coff_compute_section_file_positions):  outgoing aouthdr magic #.
	(build_debug_section):  Add fn for reading debug string section.
	(get_normalized_symtab):  Handle symbol names in debug string section.
	Remove unused obj_string_table.
	(coff_slurp_symbol_table):  Handle rs6000-specific storage classes.
	* aoutx.h (translate_from_native_sym_flags, N_SET*):  Check for
	existing section before making one.
	* cpu-rs6000.c:  New file.
	* rs6000coff.c:  New file.

Thu Oct 24 02:03:24 1991  Fred Fish  (fnf at cygnus.com)

	* elf.c: Add partial support for ELF format corefiles. Still needs
	support for extracting registers from corefiles.

	* config/t-m68k-elf:  Set DEFAULT_VECTOR to elf_big_vec.

	* config/{h-amix,h-dgux,h-irix3,h-ultra3}: For systems where
	RANLIB is defined as echo, send the output to /dev/null to help
	reduce clutter in the output from doing a make.

Mon Oct 21 17:48:48 1991  John Gilmore  (gnu at cygnus.com)

	* hosts/h-vaxult.h:  Remove malloc/free decls covered in stdlib.h.
	Fix HOST_PAGE_SIZE and HOST_SEGMENT_SIZE.  From David Taylor.

Mon Oct 21 09:34:11 1991  Steve Chamberlain  (steve at rtl.cygnus.com)

	* coffcode.h (coff_compute_section_file_positions): make it pad
	section size out if there are alignment restrictions so that the
	image will be ok on a system where section positions are worked
	out by accumulating sizes rather than from the section headers.
	* targets.c (proto write_armap). Changed orl_count to unsigned.
	* opncls.c (bfd_close_all_done). Added so that generative
	programs like gas can close a bfd without causing bfd confusion.
	* libbfd.h (changed becuase of protos)
	* amdcoff.c: messed with the way that jmp displacements are
	calcualated. This may not yet be totally correct.
	* archive.c (coff_write_armap): rewrote the way that ranlibs are
	written out.
	* coffcode.h (fixup_symbol_value): now doesn't core dump if a non
	abs symbol has no section (like a register symbol).
	(coff_write_symbol) now zeros auxent before filling it up to help
	with sensitive applications.
	* libbfd.c (bfd_write_bigendian_4byte_int): added.
	
Wed Oct 16 22:58:45 1991  John Gilmore  (gnu at cygnus.com)

	* bfd.c:  Make sure we don't get a macro strerror().
	* opncls.c (bfd_fdopenr):  If FASCIST_FDOPEN, use "r", not "r+".
	* trad-core.c (trad_unix_core_file_failing_command):  Suppress
	attempt to recover command, ifdef NO_CORE_COMMAND.
	* hosts/h-tahoe.h:  Add FASCIST_FDOPEN and NO_CORE_COMMAND;
	revamp HOST_*, etc.
	* hosts/h-i386v.h:  Use <utime.h>, not <sys/utime.h>, unlike POSIX.

Wed Oct 16 12:43:49 1991  Per Bothner  (bothner at cygnus.com)

	* archive.c (bsd_write_argmap): The size of the ranlib structures
	should not include the size field itself.
	* aoutx.h, libaout.h (NAME(aout, sizeof_headers)):  Use
	adata(abfd)->exec_bytes_size field instead of constant macro,
	because aoutx.h compiles to a simple .o file shared by
	all 32-bits a.out targets.

Wed Oct 16 11:11:05 1991  John Gilmore  (gnu at cygnus.com)

	* configure.in:  Allow i386-sco-sysv.
	* bout.c:  Remove unused i960_align; lint dummy core file handlers.
	* cpu-h8300.c:  lint.

	* host-aout.c:  New strategy.  We use common code, include files,
	and data structures to handle the file, but set a few parameters
	from the host's config file (page size, text start addr, etc).
	* libaout.h:  Define HP BSD machine types.
	* aoutf1.h:  Handle reading a.outs with these types.

	* trad-core.c:  Pass the u.u_ar0 value as the negative of the
	virtual-memory-address of the .reg section.  We can't just make a
	section for "all the regs and nothing else" because only GDB knows
	exactly where the regs are (scattered around the upage and stack).
	Clean up memory allocation.  Remove big- and little-endian
	vectors, replace with single vector; this only runs on the host,
	in host byte order.  Replace byteswap routines with aborts in case
	anyone calls them.
	* targets.c:  There's only one trad_core_vec now.
	* aoutf1.h (sunos_core_file_p):  VMA of .reg* now needs to be 0.

Tue Oct 15 08:29:03 1991  John Gilmore  (gnu at cygnus.com)

	* hosts/h-amix.h (free):  Fix prototype.

	* aoutx.h:  Don't use NULL as an integer, for braindead systems
	that declare it as (void *)0.  (From Peter Schauer.)

Mon Oct 14 17:20:47 1991  Per Bothner  (bothner at cygnus.com)

	* opncls.c (bfd_fdopenr):  Add parentheses to avoid reported
	problem with bad Ultrix system headers.
	* aoutx.h (NAME(aout,set_section_contents)):  Try to handle the
	various kinds of alignments for the various kinds of
	magic numbers.

Mon Oct 14 14:23:10 1991  John Gilmore  (gnu at cygnus.com)

	* doc/Makefile:  Don't assume . is on the path (from James Clark).

Fri Oct 11 22:45:14 1991  John Gilmore  (gnu at cygnus.com)

	* Makefile.in:  Avoid Sun Make VPATH bugs.
	* targets.c:  Declare trad_core vectors extern.

Fri Oct 11 13:03:02 1991  Per Bothner  (bothner at cygnus.com)

	* coffcode.h: Moved ALIGN macro to libbfd.h. Removed i960_align.
	* libbfd.h: Moved ALIGN macro here.
	* bout.c (b_out_callback): Replace i960_align by align_power.

	* libaout.h (struct aoutdata):  Added fields page_size,
	segment_size and exec_bytes_size.  These help generic code
	(in aoutx.h and libaout.h) to figure out where to align
	the various segments in a demand paged file.
	* libaout.h (WRITE_HEADER):  Use new (struct aoutdata) fields
	to decide if the exec header counts in a_text (text segment size).
	Also, assume D_PAGED flag is set; don't set it here.
	* bout.c (b_out_callback): Add initialization of
	adata fields page_size, segment_size, and exec_bytes_size.
	* host-aout.c (NAME(host_aout, callback) and
	NAME(host_aout,mkobject): Ditto.
	* i386aout.c (aout386_callback) and new aout386_mkobject): Ditto.
	* newos3.c (newsos3_callback) and new newsos_mkobject): Ditto.
	* aoutf1.c (sunos4_callback) and new sunos_mkobject): Ditto.
	* aoutx.h (NAME(aout,some_aout_object_p)): Don't subtract
	EXEC_BYTES_SIZE from the a_test size; this is only appropriate
	for some systems (mainly sunos), so do it in the callback instead.
	Same routine: Add stuff to the THIS_IS_ONLY_DOCUMENTATION comment.
	* aoutx.h (NAME(aout,set_section_contents): Change the way
	filepos and size of sections are carried out to support
	older styles of demand paged executables.
	

Fri Oct 11 12:33:36 1991  Steve Chamberlain  (steve at cygnus.com)

	* bfd-in.h: Added more macros to COFF_SWAP_TABLE.
	* bfd.c: Added macros to enable gas to swap coff records.
	* coffcode.h: Make the coff_swap_*_out routines return the number
	of bytes swapped, and cleaned up their prototypes.
	* configure.in: Added ebmon/coff support
	* ecoff.c: Changed null definitions of coff_swap_*_out to conform
	to new prototypes
	* targets.c: Added new entry points for coff swapping

Fri Oct 11 03:01:52 1991  John Gilmore  (gnu at cygnus.com)

	Restructure configuration scheme for bfd, binutils, ld.

	* include/sys/h-*.h:  Move to bfd/hosts/h-*.h.
	* configure.in:  Revise to symlink sysdep.h to hosts/h-xxx.h.
	Change some config names to match other dirs.
	* *.c:  Include bfd.h before sysdep.h, so ansidecl and PROTO()
	get defined first.
	* Makefile.in:  Use -I. to get sysdep.h.  Remove refs to
	../include/sysdep.h.
	* cpu-i960.c:  Strncmp needed a length arg.
	* ecoff.c:  Don't ever call trad_unix_core_file_p from here.
	* i386aout.c:  Remove dead N_TXTOFF override.
	* trad-core.c:  Don't disable the whole file if SUN4_SYS.
	* config/:  Rename some config files to match up h-*.h names.
	Remove all the HOST_SYS definitions from the config files.
	* hosts/h-amix.h, h-i386v.h:  Define POSIX_UTIME, not USG.
	* hosts/h-hp9000.h:  Remove USG comment.
	* hosts/h-rs6000.h:  Include <stdlib.h> for malloc.
	* hosts/h-news.h, h-sparc-64.h:  New config files that had
	previously been kludged in the <sysdep.h> file.

Thu Oct 10 17:54:08 1991  John Gilmore  (gnu at cygnus.com)

	* config/*:  trad-core support is HOST dependent, not target
	dependent.  Target config files only set DEFAULT_VECTOR and/or
	other vector elements.  Exception:  when host-aout.c is in use,
	in which case we're forced to assume we're native (hp, vax,
	tahoe).  Rename XDEPFILES to HDEPFILES.
	* Makefile.in:  Rename XDEPFILES.
	* config/h-sun*:  Don't force static linking.
	* trad-core.c:  Document how to use it nowadays.
	* i386aout.c, newsos3.c:  Clean up.
	* i386coff.c:  Allow 386 coff files to be used as core files too
	(for reading core files from embedded systems).

Tue Oct  8 15:30:39 1991  John Gilmore  (gnu at cygnus.com)

	* Add i386aout.c for a.out support on the i386.

Tue Oct  8 12:18:54 1991  Roland H. Pesch  (pesch at cygnus.com)

	* reloc.c, section.c, syms.c, targets.c: correct info-node
	structure in *doc* comments.
	doc/Makefile: stop hiding complaints from makeinfo.

Sun Oct  6 19:10:06 1991  John Gilmore  (gnu at cygnus.com)

	* aoutx.h (...some_aout_object_p):  Take a third parameter,
	the internal_exec struct, and avoid ever looking at an
	external_exec.  All callers changed to read the entire
	external_exec struct, swap and check its magic number, 
	swap in the whole structure, and pass the swapped-in version to
	some_aout_object_p.
	* bout.c:  Bring into modern era.  Use single _object_p routine
	for big- aand little-endian.  Provide internal and external
	exec header structs.  Use separate swap-in and swap-out routines.

	* libaout.h:  Move struct internal_exec from ../include/aout64.h
	to here.  Add obj_symbol_entry_size to struct aoutdata.
	* aoutx.h (...some_aout_object_p):  Set obj_symbol_entry_size.

	* ../include/aout64.h:  Change EXTERNAL_LIST_SIZE to
	EXTERNAL_NLIST_SIZE.  Callers changed.
	
Fri Oct  4 18:18:46 1991  John Gilmore  (gnu at cygnus.com)

	* bfd.c:  Remove strerror() to libiberty.

	* elf.c:  Remove elf_set_section_contents, use generic one.  Lint.
	* libbfd-in.h, libbfd.c:  Add bfd_generic_set_section_contents.
	* libbfd.c (bfd_generic_{get,set}_section_contents):  Check that
	last byte of transfer, not first byte, is within the section.

	* host-aout.c:  Remove `BSD' archive support.  Lint.

	* archures.c: Rename `struct bfd_arch_info_struct' to `struct
	bfd_arch_info'.  Rename `typedef bfd_arch_info_struct_type' to
	`bfd_arch_info_type'.  All uses changed.
	* reloc.c:  Rename `bfd_reloc_status_enum_type' to
	`bfd_reloc_status_type'.  Rename `bfd_reloc_code_enum_real_type'
	to `bfd_reloc_code_real_type'.  (This seems to be a misnomer,
	it needs a better name.)  All uses changed.
	* targets.c:  Rename `enum target_flavour_enum' to `enum
	target_flavour', and remove the `_enum' from all of the enum
	values themselves.  All uses changed.

	* configure.in, config/h-i386mach:  i386 mach host.
	* config/t-i386-aout:  Use host-aout.c.

	* trad-core.c:  Give it its own xvec's to make it independent
	of other file formats.
	* ecoff.c, host-aout.c:  Remove refs to trad-core.
	* config/t-dec3100, t-hp300bsd, t-tahoe, t-vax:  Define TRAD_CORE.
	* targets.c:  #ifdef TRAD_CORE, include it in the vector.

Fri Oct  4 17:38:03 1991  Steve Chamberlain  (steve at cygnus.com)

	* reloc.c: Extended NEWHOWTO macro
	* ieee.c: Changed the way 8bit pcrel is done
	* cpu-h8300.c: got the registers in the right order

Thu Oct  3 19:39:55 1991  John Gilmore  (gnu at cygnus.com)

	* bfd-in.h:  enum boolean => enum bfd_boolean for SVR4.  Gumby's
	prediction is vindicated!

	* bfd-in.h, libbfd-in.h, doc/Makefile, doc/tolibbfd, doc/intobfd:
	Remove refs to howto.c, since Steve forgot.

Thu Oct  3 07:49:21 1991  Steve Chamberlain  (steve at cygnus.com)

	* elf.c: took the abort out of set_arch_mach so that objdump -i will
	still work. Now allows any architecture/machine to be set.

Wed Oct  2 13:50:35 1991  Steve Chamberlain  (steve at cygnus.com)

	* howto.c deleted and moved code to reloc.c

	* libbfd.h, libbfd-in.h removed $id stuff for real

	* cpu-h8300.c Made it match various different spellings of h8300.

	* archures.c: Took out the first char filter which made it only
	look for a cpu/arch match when the first chars of supplied and
	tested names were the same.
	
	* targets.c removed oasys stuff, pending someone to fix the bugs
	in it.


Tue Oct  1 12:29:44 1991  John Gilmore  (gnu at cygnus.com)

	* Makefile.in, configure.in, targets.c, elf.c:  Add preliminary
	ELF support good enough for GDB.
	* configure.in, config/h-amix, config/t-m68k-elf:  Handle
	m68k-cbm-svr4 host and target.
	* config/t-m68k-coff, t-m88k-coff, t-m88k-aout:  Make files nonempty
	so `diff' and `patch' can cope.

Tue Oct  1 11:24:31 1991  Steve Chamberlain  (steve at cygnus.com)

	* archures.c: removed texinfo error

	* init.c: added texinfo hooks, and removed initialization error
	message.

	* libcoff-in.h, libbfd-in.h removed $id field so cvs can merge
	without complaints.

Tue Oct  1 05:02:53 1991  John Gilmore  (gnu at cygnus.com)

	* cpu-i960.c:  Avoid numerical count of initializers.

	Vax Ultrix changes from David Taylor <taylor@think.com>:
	* host-aout.c:  Make little-endian vector really little-endian.
	* configure.in:  Separate vax and tahoe cases, handle ultrix.
	* config/t-vax:  Add trad-core.o.
	* config/h-vaxult:  New host system.

Mon Sep 30 15:13:46 1991  Steve Chamberlain  (steve at cygnus.com)

	* bfd-in.h VERSION, change version number to 0.18, this makes a
	gap, but now is the same as the linker version number.

	* cpu-a29k.c, cpu-i386.c, cpu-m68k.c, cpu-mips.c, cpu-vax.c,
	cpu-h8300.c, cpu-i960.c, cpu-m88k.c, cpu-sparc.c: added. These
	files will eventually contain processor specific bits for bfd,
	like strange relocation information and dis/assembly.  So far only
	the H8 has been even partially done.  This work also ties in with
	the change in handling architectures.

	* amdcoff.c: (a29k_reloc) fix error message.

	* aout-f1.h: (choose_reloc_size) now calls bfd_get_arch to
	discover the architecture of the bfd. (sunos4_callback) calls the
	function bfd_set_arch_mach rather than stuffing stuff directly
	into the bfd. (sunos4_write_object_contents), changed names of
	accessor functions.

	* aoutx.h: (set_arch_mach) now calls bfd_default_set_arch_mach to
	setup the environment.

	* archive.c: (bfd_slurp_coff_armap) coff archives always have the
	headers in big endian format, regardless of the endianess of the
	host or target.

	* archures.c: totally changed. Now an architecture is represented
	with a pointer to an info structure rather than an enumerated type
	and a long. The old info is available as two elements in the
	structure.  Future enhancements to architecure support will
	involve pointers to methods being placed into the info structure.

	* bfd.c: changed the definition of the bfd structure for the new
	architecture stuff.

	* bout.c: (b_out_set_arch_mach) changed to use the new
	architecture mechanism.

	* coffcode.h: (coff_set_arch_mach, coff_set_flags) changed to use
	the new architecture mechanism.

	* configure.in: added h8 stuff.

	* ieee.c: too many changes to note.  Now ieee files written with
	bfd gas and ld can be read by gld and ieee only linkers and
	simulators.

	* libbfd.c, libbfd.h: changed prototype of bfd_write.
	
	* newsos3.c: (newos3_callback) now calls bfd_set_arch_mach rather
	than fixing the structure directly.

	* oasys.c: (oasys_object_p) now calls bfd_default_set_arch_mach rather
	than fixing the structure directly.

	* opncls.c: (new_bfd) makes sure that bfd_init has been called
	before opening a bfd.

	* srec.c: (srec_set_arch_mach) now calls bfd_default_set_arch_mach
	rather than fixing the structure directly.

	* targets.c: (target_vector) now by defining SELECT_VECS (perhaps
	in the t/hmake file) a user can select which backends they want
	linked with bfd without changing the source.

	* init.c: new, looks after initializing modules.

	* howto.c: for future use, will allow an application to work out
	what cookie to use as a handle on a relcoatio howto.
	
Mon Sep 30 13:31:15 1991  John Gilmore  (gnu at cygnus.com)

	* srec.c:  Better error checking, partly from Peter Schauer.
	(srec_object_p):  Avoid assuming any file that starts with 'S' is
	an S-record file!  (Check for 3 uppercase-hex digits after it.)
	(ISHEX):  Define new macro for checking supposedly hex characters.
	(pass_over):  Treat as EOF any S-record line that:
	    *  doesn't have hex in either size character
	    *  produces a size larger than 0x7F
	    *  has an unrecognized type number

Thu Sep 26 15:27:29 1991  John Gilmore  (gnu at cygnus.com)

	* aoutf1.h, aoutx.h, bout.c, coffcode.h, host-aout.c, oasys.c,
	opncls.c:  Lint (saber actually).

Thu Sep 26 11:24:24 1991  Per Bothner  (bothner at cygnus.com)

	* libaout.h (WRITE_HEADERS): Set header's a_text field always.
	* newsos3.c: Fixed two types: newos3 -> newsos3.
	* reloc.c (bfd_perform_relocation): Fix pc-relative relocation
	to use correct segment.

Mon Sep 23 18:24:34 1991  Per Bothner  (bothner at cygnus.com)

	* aoutx.h (print_symbol):  Handle missing symbol->name.

Fri Sep 20 12:26:01 1991  Stu Grossman  (grossman at cygnus.com)

	* aoutf1.h (swapcore_sparc):  Change name of USRSTACK, fix comment
	at top of routine.

Tue Sep 17 17:23:49 1991  Stu Grossman  (grossman at cygnus.com)

	* oasys.c, configure.in, config/h-irix3, config/t-irix3:
	add sgi/irix support.

Thu Sep 12 14:29:09 1991  John Gilmore  (gnu at cygint.cygnus.com)

	Changes for the AMD 29000 Ultracomputer port from David Wood.
	(wood@nyu.edu).

	* opncls.c (bfd_fdopenr):  Handle NO_FCNTL.

	* Makefile.in:  Make subdirs work by using $(INCDIR) in the
	crude dependencies.

	* coffcode.h (coff_real_object_p):  Pass information about the
	current file's coff symbol format to BFD via the coff_data struct.
	(coff_find_nearest_line):  obj_icof => coff_data.
	(coff_swap_sym_{in,out}):  Check that SYMNMLEN == E_SYMNMLEN.
	(coff_swap_aux_{in,out}):  Check that FILNMLEN == E_FILNMLEN
	and DIMNUM == E_DIMNUM.
	* configure.in:  Handle a29k-*-* hosts, and targets 
	a29k-*-coff, a29k-*-aout, and a29k-*-sym1.
	* libcoff-in.h:  Add local_n_btmask, local_n_btshft,
	local_n_tmask, local_n_tshift, local_symesz, local_auxesz,
	local_linesz to `coff_data' (tdata) struct.	
	(coff_data, coff_data_type, coff_tdata):  Rename struct icofdata.
	* config/h-ultra3:  Handle a29k-*-* hosts as Ultracomputers.

Thu Sep 12 14:07:22 1991  Roland H. Pesch  (pesch at cygint.cygnus.com)

	* Makefile.in: $(MAKE) for make, $(docdir) for doc
	* doc/Makefile: redundant dependencies for Sun-make VPATH bug

Tue Sep 10 20:34:12 1991  John Gilmore  (gnu at cygint.cygnus.com)

	* aoutf1.h (sunos4_core_file_p):  Release the right storage in
	error case.
	(sunos4_core_file_matches_executable_p):  Fix header comparison.
	* aoutx.h:  Avoid shifts of 32 bits, undefined in C.  Lint.
	* bout.c, icoff.c, ieee.c, libbfd.c, oasys.c:  gcc -O -W lint.

Wed Sep  4 00:44:52 1991  John Gilmore  (gnu at cygint.cygnus.com)

	Allow GDB to patch object files.

	* aoutf1.h (sunos_core_file_p):  Set SEC_HAS_CONTENTS on all sections.
	* trad-core.h (trad_unix_core_file_p):  Ditto.
	* aoutx.h (aout_set_section_contents):  On first output, check
	abfd->direction and complain if erroneous.

	* Makefile.in:  Add crude dependencies.

Tue Sep  3 13:46:19 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* config/* aoutx.h configure* shortened all the h/tmake-xxxx
	to h/t-xxxx files so that everything will work on System V.

Fri Aug 23 13:51:06 1991  John Gilmore  (gnu at cygint.cygnus.com)

	* aoutx.h:  Add information on host-aout.c and how to configure
	to use it, to the manual.
	* configure.in:  Tix typo.
	* ecoff.c:  If compiling for DEC3100, use trad_unix core files,
	else dummy out the core file support.
	* trad-core.c (trad_unix_core_file_p):  If HOST_DATA_START_ADDR is
	specified, use it to locate the data section.
	* coffcode.h (coff_write_symbols):  Declare buffer as bfd_bytes
	rather than as chars (lint).

Thu Aug 22 22:20:19 1991  Stu Grossman  (grossman at cygint.cygnus.com)

	* aoutx.h, coffcode.h:  saberized.

Thu Aug 22 11:27:06 1991  Roland H. Pesch  (pesch at cygint.cygnus.com)

	* bfd.texinfo: some cleanup, reincorporated more intro matter from
	bfd.doc 
	bfd.c, targets.c: minor rewording of doc segments


Wed Aug 21 19:13:22 1991  John Gilmore  (gnu at cygint.cygnus.com)

	* trad-core.c (trad_unix_core_file_p):  Use HOST_TEXT_START_ADDR,
	etc, rather than TEXT_START_ADDR.
	* host-aout.c:  Remove #if 0 around whole thing.
	Update to modern (32/64-bit) a.out naming conventions.
	Include a large chunk of ../include/a.out.gnu.h to get macros that
	are not defined by the system include files.
	(host_aout_{32,64}_write_object_contents):  Use the WRITE_HEADERS
	macro used by the other a.out implementations.
	* Makefile.in:  Give dependencies to OPTIONAL_BACKENDS.

Wed Aug 21 14:33:06 1991  Roland H. Pesch  (pesch at cygint.cygnus.com)

	* Makefile.in: use targets "bfd.dvi" and "bfd.ps" instead of
	texdoc and psdoc; make these depend on generated .texi's
	
	* scanit, (new) unPROTO: turn PROTO macros into ANSI declarations in
	doc
	
	* bfd.c, reloc.c, syms.c: minor spelling/wording fixes in doc
	portions	 

	* Makefile.in, awkscan-ip, awkscan-p, intobfd,
	libbfd.h, libcoff.h, tolibcoff; new bfd-in.h, libbfd-in.h,
	libcoff-in.h: (a) use separate files for invariant parts of bfd.h,
	libbfd.h, and libcoff.h; (b) in generated parts of same, use less
	obtrusive marks indicating .c origins.

	* bfd.texinfo: generalize most references to linker

Tue Aug 20 15:18:02 1991  Roland H. Pesch  (pesch at cygint.cygnus.com)

	* Makefile.in: include core.p in PROTOS (building better bfd.h)
	* archures.c: remove empty foo() definition (crept in at vn1.9)

Mon Aug 19 13:48:22 1991  Roland H. Pesch  (pesch at cygint.cygnus.com)

	* bfd.texinfo: use @setchapternewpage on instead of lots of
	@page's; minor rephrasing in Introduction.

	* aoutx.h, archive.c, archures.c, bfd.c, bfd.texinfo, cache.c,
	coffcode.h, core.c, format.c, ieee.c, libbfd.c, libbfd.h, libcoff.h,
	oasys.c, opncls.c, reloc.c, section.c, syms.c, targets.c (documentation
	segments): used BFD (caps) more consistently as a name in
	discourse, fixed a few other minor typos and uses of fonts
	

Thu Aug  8 16:47:43 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* coffcode.h: fixed bug where string table size wasn't being swapped.

Thu Aug  1 16:35:28 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* section.c: added SEC_CONSTRUCTOR_TEXT|DATA|BSS flags

	* syms.c: added BSF_CONSTRUCTOR, BSF_WARNING and BSF_INDIRECT
	flags. (bfd_print_symbol_vandf) now knows what to do with the
	above flags.

	* aoutx.h: made translate_from_native_sym_flags and
	translate_to_native_sym_flags produce the above flags.
		

Wed Jul 31 09:53:52 1991  John Gilmore  (gnu at cygint.cygnus.com)

	* all files:  update copyright notices for GPL version 2.
	Install header comments and attribute most modules to their
	authors.  BFD's name is now officially "Binary File Descriptor",
	so remove any conflicting pejoratives.
	archures.h:  Consists solely of comments; remove it.

Fri Jul 26 18:11:34 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* Makefile.in, bfd.c: Made it compile again.

Fri Jul 19 08:17:09 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* newsos3.c, targets.c, coffcode.h: new patches from David Wood


Mon Jul 15 16:27:42 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* aoutf1.h archive.c bfd.c coffcode.h core.c ecoff.c ieee.c
	bfd.texinfo oasys.c opncls.c reloc.c srec.c: More documentation on
	lint fixes.

	* amdcoff.c bfd.texinfo Makefile.in : Folded in changes for amd
	29k coff by David Wood (wood@lab.ultra.nyu.edu).

Thu Jul  4 09:53:16 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* Everything: created some new files, core.c format.c, reloc.c,
	section.c and syms.c to split the functionality a bit better.
	Cleaned up the rest of the files a bit, and added some
	documentation.


Mon Jul  1 13:29:47 1991  David Wood (wood at david.ultra.nya.edu)

	* opncls.c, ../include/sys/h-sun3.h ../include/sys/h-sun4.h: fcntl
	really takes 3 arguments, patched code and ammended prototypes.

Fri Jun 14 13:19:40 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* ../include/bfd.h (struct bfd_target): Added new field
	"align_power_min" which contains the minimum alignment for a
	section. This is used in coff_new_section_hook. The field
	insertion necessitates an update of all backends..

	* aoutf1.h jump table field inserted
	
	* archive.c(snarf_ar_hdr)(bfd_slurp_coff_armap) can now parse dgux style extended
	filenames too.

	* bout.c(b_out_squirt_out_relocs) fix to assertion tests. Jump
	table field inserted.
	
	* coffcode.h(just about everything) Now patches up symbol tables
	using a different mechanism. The Intel major bug has been fixed,
	and the linker can self host on the Aviion and be debugged with
	gdb.

	* ecoff.c: new include and jump table patch, i386coff.c: new
	include and jump table patch,  icoff.c: new include and jump table
	patch, ieee.c: can now read archives containing ieee modules.,
	libcoff.h: added (combined_entry_type), libieee.h: uped max
	sections to 20, m68kcoff.c: new include and jump table patch,
	m88kbcs.c: new include and jump table patch, oasys.c: various bugs
	fixed. opncls.c: added bfd_alloc_grow and bfd_alloc_finish.
	srec.c: jump table patch. trad-code.c fixed #IF typeo

Fri Jun  7 12:35:46 1991  Sean Fagan  (sef at cygint.cygnus.com)
 
 	* coffcode.h (coff_swap_aux_in): added else case to deal with
 	filenames less than 9 characters.
 

Thu Jun  6 18:27:38 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* ../include/oasys.h oasys.c (oasys_archive_p): fixed so it works
	
	* srec.c: now allows any number of sections to be created in a
	file. Outputs addresses of the right length.

Thu May 30 15:30:10 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* bfd.c (bfd_check_format): Fixed problem where when a defaulted
	target didn't match, the format got set to the attempted match,
	breaking a future test.

        *../include/i386coff.h : fixed typo in type field with size

	* i386coff.c icoff.c m88k-bcs.c ecoff.c ../include/bfd.h : Added
	support in the jump table for the swapping routines exported to
	gdb. Now gdb works with the 386.

Tue May 28 17:21:43 1991  John Gilmore  (gnu at cygint.cygnus.com)

	* Merge in changes from gdb-3.95 release.
	Makefile.in:  Allow hmake and tmake files to add OFILES.
	aoutf1.h:  
	bfd.c:  support specific targets as well as searching.  When
	searching, take default target in preference to others.
	bfd.doc:  typos
	ieee.c, oasys.c:  Avoid using the "tdata" macros left of assignment.
	liba.out.h:  Don't hard-code file offsets; use N_ macros for them.
	libbfd.h:  Support specific targets as well as searching.
	opncls.c:  Support specific targets as well as searching.
	targets.c:  Search is short-circuited if default target matches.
	liboasys.c, libieee.c:  Undo bothner changes that make macros
	work to the left of assignment, but which depend on the
	representations of different pointer types being the same.

Fri May 24 18:56:52 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* i386coff.c: created.
	* coffcode.h: added support for 386. 
	* Makefile.in: added support for 386. 
	* ../include/i386coff.h: created

Wed May 22 07:26:38 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* coffcode.h: removed all put_x_<sizes>
	* libbfd.c: Changed #ifdef __GNUC__ to #ifdef HOST_64_BIT, Added
	DEFUNS 


Tue May 21 08:58:58 1991  Steve Chamberlain  (steve at cygint.cygnus.com)
	(bothner)
	* opncls.c: Changed obstack_chunk_alloc use xmalloc

Mon May 20 17:12:17 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* everything: Removed sysdep.h from bfd.h and put back into files
	from which it was split out. Now 64 bit version is built with a
	-DHOST_64_BIT="long long" on the compile line.


Fri May 17 19:35:26 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	Changed all the [get|put][name] routines to use  [get|put]_[size
	in bytes].  

	Put in support for 64 bit work. Now two versions of bfd may be
	generated, according to the state of TARGET_64_BIT, one which is
	32 bit only, and one which is 64/32 bits. 
	Created new back end 'demo64' to test 64 bit functionality.

	Renamed some files to work on DOS.

	* archive.c: lint * bfd.c: prototypes and lint. * ecoff.c: added
	64bit transfer 	* icoff.c: added 64bit transfer * ieee.c: name
	chage, 64 bit transfer. * liba.out.h: Split out common code from
	sunos and newsos into liba.out. Name changes and prototype mods. *
	libbfd.c: lint and prototypes, extra 64bit swaps. * libbfd.h:
	prototypes for new functions. * libcoff.h: lint * libieee.h: make
	work on DOS * liboasys.h: make work on DOS * m88k-bcs.c: Name
	change and 64bit stuff.* newsos3.c: common code removed, new jump
	table. * oasys.c: Name change * opncls.c: Portability fixes *
	srec.c: Name changes * sunos.c: Removed comon code. * targets.c:
	Added demo * aout32, aout64.c include  aoutx.h * bout.c: used to
	be called b.out.c * coffcode.h: used to be called coff-code.h, now
	64bit ized. * demo64.c: 64 bit a.out back end


	


Thu May 16 16:02:07 1991  Steve Chamberlain  (steve at cygint.cygnus.com)
	from bothner
 	* libieee.h: Make ieee_data and ieee_ar_data macros usable
	on LHS of assignment, even when using old compilers.
	* liboasys.h: Ditto for oasys_data and oasys_ar_data.
	* m68kcoff.c: Add enum-to-int casts to accomodate old compilers.
	* newsos3.c: Fix definitions of SEGMENT_SIZE and TEXT_START_ADDR.
	* opncls.c: Define S_IXUSR, S_IXGRP, S_IXOTH if undefined.
	* targets.c: Add declaration of newsos3_vec.


Mon May 13 10:03:29 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* aout.c: fixxed some of the problems with filepos calculation.
	(swap_ext_reloc): fixed problem with creation of relocs.
	(aout_set_section_contents): fixed filepos problem

	* coff-code.h: (swap_filehdr_in, swap_filehdr_out) add.
	(swap_filehdr) delete. Changed all the usage of bfd_h_put_x.
	(swap_aouthdr_in, swap_aouthdr_out) add. (swap_aouthdr) delete.
	(coff_real_object_p) cleaned up, added MIPS. (coff_object_p)
	cleaned up. (coff_write_object_contents) cleaned up. 

	* ecoff.c: Totally different. Now supports ecoff fully.

	* icoff.c: fixed problems in relocation callout.

	* libcoff.h: (struct icofdata) removed hdr structure from tdata.

	* m68kcoff.c: updated target vector.

	* sunos.c: (choose_reloc_size) added: (sunos4_callback) calls
	choose_reloc_size. (sunos4_write_object_contents) now calls
	choose_reloc_size so outputs relocs correctly, also calculates the
	size of the sections correctly.



Fri May 10 16:58:53 1991  John Gilmore  (gnu at cygint.cygnus.com)

	Merge Per Bothner's changes to modularize BFD a.out a bit.

	* libbfd.h, libbfd.c (bfd_generic_get_section_contents):  Add.
	* ieee.c:  Cast enums to int before comparing them, for brain-
	dead compilers.
	* coff-code.h:  Remove coff_get_section_contents, and use the
	generic one instead.

	* aout.c:  Derive new module from sunos.c, containing generic
	support code for all kinds of a.out files.

	* sunos.c: Remove all code that goes in aout.c.  Split out
	machine dependent followup in sunos4_object_p into
	sunos4_callback.  Use JUMP_TABLE(aout) for the transver vector,
	and redefine only the names we CHANGE, not all the names.  Drop
	the little-endian vector, and rename the vector as sunos4 rather
	than generic.

	* b.out.c:  Use aout.c routines for most of the work.  Slight
	changes for the new regime.  Remove close_and_cleanup and
	get_section_contents in favor of generics.  New transfer vector
	regime.

	* newsos.c:  New support for Sony NEWS, another a.out format.

	* ecoff.c:  Remove close_and_cleanup.  New tvec regime.
	* icoff.c, m88k-bcs.c:  Add write_contents to tvec.
	* ieee.c, oasys.c:  Remove close_and_cleanup, add write_contents
	to tvec. 
	* opncls.c (bfd_close):  Call format-dependent write_contents
	routine, if writing, before calling target-dependent
	close_and_cleanup routine (which is now always generic, I think).
	* srec.c:  Use bfd_alloc instead of malloc.  Remove
	close_and_cleanup and move code from it to
	srec_write_object_contents.  Add write_contents to tvec.
	* targets.c:  Remove a.out little vector, replace a.out big
	vector with SunOS vector.  FIXME:  Need Vax support again now.

	* libbfd.h:  Add write_contents format-dependent-vector to the
	bfd_target vector.  Supply a generic close_and_cleanup routine.
	* liba.out.h:  Handle the new aout.c split.  Add prototypes for
	all routines defined in aout.c.  Rename "sunos" things to "aout"
	things.  Add a few fields where needed for various formats.
	* Makefile.in:  Add aout.c and newsos.c.

	* archive.c, ieee.c, oasys.c:  Lint.

Fri May 10 12:34:48 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* ../include/bfd.h
	changed forward declaration struct stat; to reduce warnings. Changed
	comment on bfd_h_<x>_x.

	* ../include/m68kcoff.h, ../include/intel-coff.h,
	../include/m88k-bcs.h
	Now there are two incarnations of relocs, linenos and syments. One for
	internal digestion, and one full of char arrays for I/O. The original
	names have gone to detect errors.

	* Makefile.in, m68kcoff.c, targets.c
	Test new structure code with a 68k coff implementaion

	* coff-code.h, icoff.c, coffswap.c, libcoff.h 
	Fixed all the places where there were problems with the size and
	alignments of structures on disk and structures in memory. #ifed out
	all the code in coffswap.c, since it should be done using the target
	swap routines now.

Thu May  9 11:00:45 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* ieee.c (do_one, ieee_slurp_section_data): now supports the load
	multiple reloc command.

	* sunos.c (sunos4_set_section_contents): Made it so that sections
	are always padded to their alignment size.

Sat May  4 15:49:43 1991  John Gilmore  (gnu at cygint.cygnus.com)

	* archive.c, bfd.c, coff-code.h, opncls.c, sunos.c, trad-core.c:
	Clean up types and such (saber C problems).
	* ecoff.c:  Clean up types and such.  Remove routines that are
	not used.  Fix up reading and swapping of shorts from files.

   Notes on bfd-0.5.2-patch1a, from Per Bothner:

	* a.out.vax.c: Remove two bogus "static" from prototypes.

	* ecoff.c: Got rid of lots of non-working junk (that had
	been copied directly from coff-code.h).
	Updated to be consistent with updates to icoff.c and coff-code.h.

	* libbfd.h: Added definitions for S_IXUSR, S_IXGRP, and S_IXOTH
	if they're missing (as they are in (BDS-4.3-based) NewsOS-3).

	* sunos.c (n_txtoff): (Re-)Add support for sony. This is a kludge,
	but until the target_vector is automatically generated,
	it's as good as any. Note that the text offset is the only
	difference between NewsOS and SunOs (including magic numbers).
	(Most of the sunos_* routines should to renamed bsd_*
	and move to a bsd.c file. Then (and when the target_vector
	is automatically generated) it might make sense to create
	a separate Sony target.)

	* sysdep.h: Don't declare fread and fwrite. Causes trouble
	on some systems, and doesn't help on others.
	Similarly, only define X_OK if not already defined.

	* trad-core.c: Don't include sys/stat.h - at least
	on NewsOS 3, it has already been included.

Tue Mar  5 01:47:57 1991  John Gilmore  (gnu at cygint.cygnus.com)

	* coff-code.h (bfd_coff_swap_sym, bfd_coff_swap_aux,
	bfd_coff_swap_lineno):  Export the routines that byte-swap COFF
	symbol tables if necessary when reading them in, so gdb can use
	them.  Add "bfd_coff_" to the names so they won't conflict with
	names in calling programs.  FIXME-soon:  if coff-code.h is
	included in two BFD modules, this will cause duplicate
	definitions; the routines should be exported to a separate,
	common, module (probably along with a mess of other ones).

Sat Mar  2 12:11:26 1991  John Gilmore  (gnu at cygint.cygnus.com)

	Improve modtime support.

	* bfd.h:  Add boolean mtime_set, and declare bfd_get_mtime.
	Remove #define for bfd_get_mtime.  Remove gratuitous comment.
	* bfd.c (bfd_get_mtime):  New fn, caches mtime, gets if not cached.
	BUG:  archive members still do not get correct mod times.

	Improve floating point support for core files.

	* sunos.c (struct core):  Change void *fpa_dummy to double fp_stuff.
	(sunos4_core_file_p):  Create a second registers section in the
	core file, called ".reg2", for the float registers.

Thu Feb 14 15:49:06 1991  Gumby Vinayak Wallace  (gumby at cygint.cygnus.com)

	* many changes to improve archive handling; found a logic flaw in
	  bfd_check_format which only just happened to work by cooncidence.

Thu Feb 14 07:53:16 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* bfd.c (bfd_perform_relocation): fixed to use output_offsets
	correctly.
	
	* bfd.h: changed type of udata in asymbol to void *, like it
	should be. Added bfd_reloc_dangerous enum member.

	* coff-code.h: Fixed it so that internally generated symbols get
	their values relocated correctly in all cases. Removed calls to
	xmalloc.

	* icoff.c: Not understanding the destination symbol of a reloc is
	not a failure any more, just 'dangerous'. This allows linking of
	b.out and coff images.

	* sunos.c: Cleaned up the way that ZMAGIC section sizes are
	calculated.


Tue Feb 12 13:25:46 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* sunos.c (translate_to_native_sym_flags): fixed
	sym_pointer->n_value so that symbols on the way out get their
	section relative values calculated correctly.

	* coff-code.h (mangle_symbols): fixed problem where tags were not
	being relocated for structs, enums, unions. Also various lints.

Mon Feb 11 19:52:26 1991  Gumby Vinayak Wallace  (gumby at cygint.cygnus.com)

	* archive.c (get_elt_at_filepos): system_call_error returned
	  incorrectly.

Sun Feb 10 23:18:40 1991  Gumby Vinayak Wallace  (gumby at cygint.cygnus.com)

	* Resolve the use of no_error and system_call_error.
	  The bfd library itself now will never set bfd_error to
	  no_error.

	  The code still needs to be combed to make sure all the error
	  codes are correct.  I suspect they are not always set correctly.

	* The names of all the messages have _ prepended because the sun
	  bundled compiler can't distinguish from a macro which takes an
	  argument and the same identifier in a non-macro context.

	* The reason for the above being that entry points which used to
	  be trampoline functions are now just macros which expand to a
	  direct call through the bfd's xfer vector.

	* (../include/intel-coff.h) F_AR32WR: fix this constant.  Why
	  must gas have its own version of everything (the gas version
	  had the correct value)

Tue Feb  5 11:46:53 1991  Steve Chamberlain  (steve at cygint.cygnus.com)

	* b.out.c: Added patches supplied by chrisb@mipon2.intel.com to
	properly support i960 architecture and output correct reloc stuff.

	* bfd.h: added prototype for bfd_printable_arch_mach, added
	BFD_FAIL

	* coff-code.h: Applied patches from chrisb to support i960
	architecture, zero relocs and swap them correcly and conditionally
	compiled the timestamp.

	* sunos.c: Made the default section alignment 2^3 so that doubles
	are done properly. Fixed the same reloc bug that was in b.out.c

	* sysdep.h: Now compiles on a Posix box

Wed Jan 30 21:36:26 1991  John Gilmore  (gnu at cygint.cygnus.com)

	* icoff.c:  Fix comment on big-endian version.
	* coff-code.h:  Make HAS_RELOC really work (it's backwards from
	F_RELFLG).  Set F_AR32WR in output files if little endian
	architecture.

Tue Jan 29 20:56:10 PST 1991 steve@cygnus.com
	
	* archures.c fixed =/== typo
	
	* sunos.c added architecture stuff for output. Fixed
	bug where files where vma(data) != size(text) 
	were processed wrong.

	* coff-code.h added a lint cast

	* (../include/a.out.sun4.h) fixed it so zmagic
	worked

Mon Jan 28 19:15:29 PST 1991 steve@cygnus.com

	* archive.c removed loads of includes, and fixed bug where string
	table didn't have a null at the end.

	* bfd.c fixed includes, added symbols argument to 
	canonicalize_reloc entry point.

	* libbfd.c fixed includes and added some lint patches.
	
	* targets.c added both sorts of intel coff.

	* b.out.c fixed included, changed was the canonical
	relocs were done.

	* icoff.c added support for callj and big and little
	enidian tables.

	* opncls.c added chmod+xing for files with EXEC_P set.

	* sunos.c fixed includes. Changed default section
	alignement to words. Fixed relocation stuff to work with
	new scheme

	* bfd.h various new types added, prototype for new
	reloc calls, changed bfd->iostream to a void *
	to including files don't need stdio.h.

	* libcoff.h added conversion table to tie relocs to
	canonical symbols
		
	* sysdep.h created

	* coff-code.h fixed includes. Added code to support
	big and little endian formats. Various lints. Better
	processing of symbols. Changed reloc stuff to new
	order

	* libbfd.h fixed includes


Mon Jan 21 11:53:51 PST 1991 steve@cygnus.com
	
	* bfd.h	changed name of alignment entry in sec_struct to
	alignment_power, because of conflicting uses within bfd.
	Now it should be obvious that it's a 2**n alignment
	specifier. Removed start_pad, end_alignment, block, minsize,
	output_file_alignment, subsection_alignment and original_vma fields.
	Added align_power() macro. Fixed bfd_section_alignment
	acessor macros. Added bfd_symbol_same_target macro.

	* b.out.c (b_out_write_object_contents) fixed to use
	new alignment member. Fixed (callj_callback) to use section
	relative symbols properly.

	* sunos.c (sunos4_object_p) fixed to use new alignment_power.
	Fixed (translate_from_native_sym_flags) to correctly make	
	symbols section relative.

	* bfd.c (bfd_errmsg) fixed various enum cast problems. 
	(bfd_make_section) took out initialization of obsolete members.
	(bfd_print_symbol_vandf) added

	* opncls.c (bfd_create) created.

	* coff-code.h (coff_new_section_hook) took away refs
	to obsolete members. (make_a_section_from_file) added
	conversion between alignment types. (coff_symbol_from)
	added. (coff_count_linenumbers) only counts linenumbers
	if symbol is of coff-type. (coff_mangle_symbols) only
	heavily mangles symbols if symbol is coff-type.
	(coff_write_symbols) various lints. (coff_write_object_contents)
	various lints and modification for alignment conversion.
	(coff_slurp_relocs) fixed for use with new asection shape.

Sat Jan 19 16:10:42 PST 1991 steve@cygnus.com

	* archive.c lots of lint

	* b.out.c added callj relocation support, upgrated reloc howto.
	Fixed so that asymbol and reloc records are output 
	correctly.

	* bfd.c lots of lint, support for new bfd entry point
	bfd_print_symbol.

	* bfd.h changed definition of asymbol to contain pointer to
	owning bfd, removed target dependencies.

	* cache.c took out print statements, put in BFD_ASSERT calls.

	* coff-code.h various lints, corrected linenumber output
	functionality. Added support for new style asymbols and
	bfd_print_symbol. Fixed so that asymbol and
	reloc records are handled correctly. Added timestamp.

	* icoff.c Added support for new howto shape.
	
	* liba.out.h Added support for new asymbol shape

	* libbfd.c various lints

	* libbfd.h various lints

	* libcoff.h added support for new asymbol shape.

	* sunos.c  various lints. Added support for new asymbol shape
	and bfd_print_symbol.

Wed Jan 16 21:38:09 PST 1991 steve@cygnus.com

	* b.out.c removed prototype of sunos4_ennativate_symtab, lots of
	pointer lint. Added support for callj relocation. Fixed bug where
	the last 32 bytes of the text section were overwritten by data. Fixed bug
	where archives of b.out didn't work due bfd_slurp_extended_name_table
	returning false.

	* sunos.c added support for n_other field. Braced the howto table so
	that it won't be affected by any lengthing of the howto struct typedef.
	Various lints

	* bfd.h added support for n_other field, added special_function 	
	reloc type, modified bfd_perform_relocation prototype. Added bfd_h_get_x
	macros.

	* bfd.c upgraded bfd_perform_relocation, various lints.

Wed Jan 16 01:55:53 1991  John Gilmore  (gnu at rtl)

	* ChangeLog:  Started ChangeLog for BFD.
	* ToDo:  Create file for suggestions.

	* Makefile:  Support easy loading into Saber C.
	Add dependencies for icoff.o and bcs88kcoff.o.
	Rename coff.c to coff-code.h.  Change callers.

	* bfd.c (bfd_check_format):  Allow the check_format routines
	to return the desired target vector, rather than just a Boolean.
	bfd.h (bfd_check_format):  Change function pointer return type.
	archive.c (bfd_generic_archive_p):  change callee.
	b.out.c (b_out_little_object_p, b_out_big_object_p,
	b_out_real_object_p):  change callee.
	libbfd.c (_bfd_dummy_target):  Dummy routine replacing bfd_false
	in check_format transfer vectors that need a filler.
	libbfd.h (bfd_generic_archive_p, _bfd_dummy_target):  Fix decls.
	bcs88kcoff.c:  change callee.
	coff-code.h (coff_real_object_p, coff_big_object_p):  change callee.
	icoff.c:  change callee.
	sunos.c (sunos4_object_p, sunos4_core_file_p):  change callee.

	* libbfd.c (zalloc):  It should actually zero the storage!
	This was commented out for some reason.

	* libbfd.h:  Add malloc, xmalloc, memcpy, and fatal decls.
	This is so callers can avoid <stdlib.h> which doesn't exist
	on older systems.

	* bfd.c (map_over_sections):  Add debugging code, since I
	noticed the section count for sunos core files was bad, but only
	GDB had detected the problem.
	(bfd_set_section_lineno_size, bfd_set_section_linenos,
	bfd_get_section_linenos):  Remove obsolete functions.
	(bfd_apply_relocations):  Use longs, not ints, for the math.

	* bfd.h:  Declare enum boolean and struct bfd_target as well
	as typedefs for them.  Remove obsolete
	bfd_get_section_lineno_size.

	* cache.c:  Make the "fdopen" support work.  Keep better track
	of how many files are open.  Centralize the opening of files
	and be sure bfd_open[rw] actually try to open the file.  Evade
	linked list initialization problems.

	* b.out.c, coff-code.h, opncls.c, sunos.c:  lint.

	* coff-code.h (coff_slurp_symbol_table):  Null-terminate symtab names.

	* cplus-dem.c:  Delete file, since it is not part of BFD.

	* opncls.c (bfd_openr):  Eliminate misplaced #if 0 code.
	(bfd_openr, bfd_openw):  Actually open the file, give error now.
	
	* sunos.c (sunos4_core_file_p):  Set section count.
	(sunos4_set_section_linenos, stab_names, fprint_name):  Eliminiate
	obsolete definitions.
	(_write_symbol_table):  Initialize <idx> counter.
	(foop):  Eliminate debugging code.
